(()=>{var t,e,n,r,o,c={4785:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){return function t(e,n,r){var o,c,a=window,l="application/octet-stream",i=r||l,s=e,u=!n&&!r&&s,f=document.createElement("a"),d=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||d,p=n||"download";if(h=h.call?h.bind(a):Blob,"true"===String(this)&&(i=(s=[s,i])[0],s=s[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],f.href=u,-1!==f.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,l)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(s)){if(!(s.length>2096103.424&&h!==d))return navigator.msSaveBlob?navigator.msSaveBlob(v(s),p):y(s);i=(s=v(s)).type||l}else if(/([\x80-\xff])/.test(s)){for(var g=0,$=new Uint8Array(s.length),b=$.length;g<b;++g)$[g]=s.charCodeAt(g);s=new h([$],{type:i})}function v(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=r.length,c=0,a=new Uint8Array(o);c<o;++c)a[c]=r.charCodeAt(c);return new h([a],{type:n})}function y(t,e){if("download"in f)return f.href=t,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){a.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,l)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,l)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=s instanceof h?s:new h([s],{type:i}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(a.URL)y(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===d)try{return y("data:"+i+";base64,"+a.btoa(o))}catch(t){return y("data:"+i+","+encodeURIComponent(o))}(c=new FileReader).onload=function(t){y(this.result)},c.readAsDataURL(o)}return!0}})?n.apply(e,[]):n)||(t.exports=r)}},a={};function l(t){var e=a[t];if(void 0!==e)return e.exports;var n=a[t]={id:t,loaded:!1,exports:{}};return c[t].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=c,t=[],l.O=(e,n,r,o)=>{if(!n){var c=1/0;for(u=0;u<t.length;u++){for(var[n,r,o]=t[u],a=!0,i=0;i<n.length;i++)(!1&o||c>=o)&&Object.keys(l.O).every((t=>l.O[t](n[i])))?n.splice(i--,1):(a=!1,o<c&&(c=o));if(a){t.splice(u--,1);var s=r();void 0!==s&&(e=s)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,r,o]},l.F={},l.E=t=>{Object.keys(l.F).map((e=>{l.F[e](t)}))},l.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return l.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,l.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var o=Object.create(null);l.r(o);var c={};e=e||[null,n({}),n([]),n(n)];for(var a=2&r&&t;"object"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((e=>c[e]=()=>t[e]));return c.default=()=>t,l.d(o,c),o},l.d=(t,e)=>{for(var n in e)l.o(e,n)&&!l.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},l.f={},l.e=t=>Promise.all(Object.keys(l.f).reduce(((e,n)=>(l.f[n](t,e),e)),[])),l.u=t=>t+"-"+{87:"f7b8df61ff55eaa71e5e",483:"b16e761eeea558a434ed"}[t]+".js",l.miniCssF=t=>"main-ea543a84e507b6491e0b.css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r={},o="hfy-epub:",l.l=(t,e,n,c)=>{if(r[t])r[t].push(e);else{var a,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var f=s[u];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==o+n){a=f;break}}a||(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack",o+n),a.src=t),r[t]=[e];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(h);var o=r[t];if(delete r[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(n))),e)return e(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),i&&document.head.appendChild(a)}},l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;l.g.importScripts&&(t=l.g.location+"");var e=l.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=t})(),(()=>{var t={179:0};l.f.j=(e,n)=>{var r=l.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=t[e]=[n,o]));n.push(r[2]=o);var c=l.p+l.u(e),a=new Error;l.l(c,(n=>{if(l.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",a.name="ChunkLoadError",a.type=o,a.request=c,r[1](a)}}),"chunk-"+e,e)}},l.F.j=e=>{if(!l.o(t,e)||void 0===t[e]){t[e]=null;var n=document.createElement("link");l.nc&&n.setAttribute("nonce",l.nc),n.rel="prefetch",n.as="script",n.href=l.p+l.u(e),document.head.appendChild(n)}},l.O.j=e=>0===t[e];var e=(e,n)=>{var r,o,[c,a,i]=n,s=0;if(c.some((e=>0!==t[e]))){for(r in a)l.o(a,r)&&(l.m[r]=a[r]);if(i)var u=i(l)}for(e&&e(n);s<c.length;s++)o=c[s],l.o(t,o)&&t[o]&&t[o][0](),t[c[s]]=0;return l.O(u)},n=self.webpackChunkhfy_epub=self.webpackChunkhfy_epub||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),l.O(0,[179],(()=>{l.E(87),l.E(483)}),5);var i={};(()=>{"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){return 0===Object.keys(t).length}function i(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function f(t,e,n,r,o,c){if(o){const a=s(e,n,r,c);t.p(a,o)}}function d(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}new Set;let h,p=!1;function m(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function k(){return y(" ")}function w(){return y("")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t){return function(e){return e.preventDefault(),t.call(this,e)}}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e){t.value=null==e?"":e}function E(t){h=t}function _(){if(!h)throw new Error("Function called outside component initialization");return h}new Set;const O=[],N=[],j=[],D=[],P=Promise.resolve();let R=!1;function H(t){j.push(t)}function L(t){D.push(t)}let F=!1;const U=new Set;function M(){if(!F){F=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];E(e),B(e.$$)}for(E(null),O.length=0;N.length;)N.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];U.has(e)||(U.add(e),e())}j.length=0}while(O.length);for(;D.length;)D.pop()();R=!1,F=!1,U.clear()}}function B(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const I=new Set;let W,Y;function q(){W={r:0,c:[],p:W}}function K(){W.r||r(W.c),W=W.p}function G(t,e){t&&t.i&&(I.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),W.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function V(t,e){const n=e.token={};function r(t,r,o,c){if(e.token!==n)return;e.resolved=c;let a=e.ctx;void 0!==o&&(a=a.slice(),a[o]=c);const l=t&&(e.current=t)(a);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(q(),z(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),K())})):e.block.d(1),l.c(),G(l,1),l.m(e.mount(),e.anchor),i=!0),e.block=l,e.blocks&&(e.blocks[r]=l),i&&M()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=_();if(t.then((t=>{E(n),r(e.then,1,e.value,t),E(null)}),(t=>{if(E(n),r(e.catch,2,e.error,t),E(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function X(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function J(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Q(t){t&&t.c()}function Z(t,n,c,a){const{fragment:l,on_mount:i,on_destroy:s,after_update:u}=t.$$;l&&l.m(n,c),a||H((()=>{const n=i.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(H)}function tt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,o,c,a,l,i,s,u=[-1]){const f=h;E(e);const d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:o.context||[]),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};s&&s(d.root);let m=!1;if(d.ctx=c?c(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&function(t,e){-1===t.$$.dirty[0]&&(O.push(t),R||(R=!0,P.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),m=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){p=!0;const t=(g=o.target,Array.from(g.childNodes));d.fragment&&d.fragment.l(t),t.forEach($)}else d.fragment&&d.fragment.c();o.intro&&G(e.$$.fragment),Z(e,o.target,o.anchor,o.customElement),p=!1,M()}var g;E(f)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(Y=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class nt{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function rt(t){let e;return{c(){e=v("p"),e.innerHTML='This website (<a href="https://cpiber.github.io/hfy-epub" target="_blank" class="svelte-agc9w7">https://cpiber.github.io/hfy-epub</a>) does not, and will not, collect any data from its users.\n      Any actions taken on this page are purely in the user&#39;s browser; there is no server-side component.\n      No data is ever sent away.\n      For collecting the chapter data, this site contacts <code class="svelte-agc9w7">https://api.reddit.com</code> only. The book is generated in the browser.',T(e,"class","small svelte-agc9w7")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function ot(e){let n,r,o,c,a,l,i,s,u,f,d,h,p,b,w=e[0]&&rt();return{c(){n=v("footer"),r=v("p"),o=y("Made by "),c=v("a"),c.textContent="@cpiber",a=y(".\n    Source Code: "),l=v("a"),l.textContent="cpiber/hfy-epub",i=y(".\n    \n    Version "),s=y("0.2.0"),u=y(".\n    "),f=v("a"),f.textContent="Privacy",d=y("."),h=k(),w&&w.c(),T(c,"href","https://github.com/cpiber"),T(c,"target","_blank"),T(c,"class","svelte-agc9w7"),T(l,"href","https://github.com/cpiber/hfy-epub"),T(l,"target","_blank"),T(l,"class","svelte-agc9w7"),T(f,"href","#?"),T(f,"class","svelte-agc9w7"),T(r,"class","small svelte-agc9w7"),T(n,"class","svelte-agc9w7")},m(t,$){g(t,n,$),m(n,r),m(r,o),m(r,c),m(r,a),m(r,l),m(r,i),m(r,s),m(r,u),m(r,f),m(r,d),m(n,h),w&&w.m(n,null),p||(b=x(f,"click",S(e[1])),p=!0)},p(t,[e]){t[0]?w||(w=rt(),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},i:t,o:t,d(t){t&&$(n),w&&w.d(),p=!1,b()}}}function ct(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}const at=class extends nt{constructor(t){super(),et(this,t,ct,ot,c,{})}};function lt(e){let n;return{c(){n=v("header"),n.innerHTML='<h1 class="svelte-10isbm1">r/HFY epub generator</h1>',T(n,"class","svelte-10isbm1")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&$(n)}}}const it=class extends nt{constructor(t){super(),et(this,t,null,lt,c,{})}};var st,ut,ft=function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function l(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}i((r=r.apply(t,e||[])).next())}))},dt=function(t,e){var n,r,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function l(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},ht=function(t,e){return ft(void 0,void 0,void 0,(function(){var n,r;return dt(this,(function(o){switch(o.label){case 0:n="undefined"!=typeof AbortController?new AbortController:{},r=setTimeout((function(){return n.abort&&n.abort()}),e),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,fetch(t,{signal:n.signal})];case 2:return[2,o.sent()];case 3:return clearTimeout(r),[7];case 4:return[2]}}))}))},pt=function(t,e,n){return void 0===e&&(e=1e4),void 0===n&&(n=3),ft(void 0,void 0,void 0,(function(){var r;return dt(this,(function(o){switch(o.label){case 0:r=0,o.label=1;case 1:if(!(r<n-1))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,ht(t,e)];case 3:return[2,o.sent()];case 4:return o.sent(),console.log("Failed to fetch `"+t+"` "+(r+1)+" "+(0===r?"time":"times")+". Retrying..."),[3,5];case 5:return r++,[3,1];case 6:return[2,ht(t,e)]}}))}))},mt=function(t){return t instanceof URL||(t=new URL(t)),t.hostname="api.reddit.com",t.pathname.endsWith("/")?t.pathname=t.pathname.slice(0,t.pathname.length-1)+".json":t.pathname.endsWith(".json")||(t.pathname+=".json"),t.protocol="https",t.search="",t.hash="",t.toString()},gt=function(t){return t.slice(0,-5).replace("https://api","https://www")},$t=(st=new DOMParser,function(t){return st.parseFromString(t,"text/html").documentElement.textContent}),bt=/\[([^\]]+)\]\s*\(((?:https?:\/\/(?:[^.]+\.)?reddit\.com)?\/r\/([^\/]+)\/comments\/[^)]+)\)/gim,vt=/href="((?:https?:\/\/(?:[^.]+\.)?reddit\.com)?\/r\/([^\/]+)\/comments\/[^"]+)"[^>]*>\s*([^<]+)/gim,yt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,c=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=c.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}return a},kt=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,c=e.length;o<c;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},wt=/^https?:\/\/(?:[^.]+\.)?reddit\.com\/r\/hfy\/wiki\/series\//i,xt=/^https?:\/\/(?:[^.]+\.)?reddit\.com\/r\/([^/]+)\/comments\//i,St=function(t){return{title:$t(t[0].data.children[0].data.title),content:$t(t[0].data.children[0].data.selftext_html),url:mt(t[0].data.children[0].data.url),needsFetching:!1}};!function(t){t[t.HFY_SERIES=0]="HFY_SERIES",t[t.POST=1]="POST",t[t.SEARCH=2]="SEARCH"}(ut||(ut={}));var Tt=function(t){var e=t.match(/href="([^"]+)"[^>]*>\s*Next/i);if(e)return e[1];var n=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,c=e.length;o<c;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,c=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=c.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}return a}(t.matchAll(vt)),!1).reverse().find((function(t){var e=t[3].toLowerCase();return!e.startsWith("first")&&!e.startsWith("prev")&&!e.startsWith("index")}));return n?n[1]:void 0};function Ct(t){let e;return{c(){e=v("p"),e.textContent="Please enter a search string",T(e,"class","small error svelte-5ajakl")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function At(e){let n,o,c,a,l,i,s,u,f,d,h,p,b,y,w,S=!e[0].trim().length,C=S&&Ct();return{c(){n=v("h2"),n.innerHTML='Please enter your search terms below: <a class="small" href="https://github.com/cpiber/hfy-epub/tree/master/docs/index.md" target="_blank">Help</a>',o=k(),c=v("form"),a=v("p"),l=v("input"),i=k(),s=v("input"),f=k(),C&&C.c(),d=k(),h=v("p"),h.textContent="You can:",p=k(),b=v("ul"),b.innerHTML='<li>Search for a series title on the <a href="https://reddit.com/r/HFY/wiki/series" target="_blank">r/HFY wiki</a></li> \n  <li>Enter a series link to the <a href="https://reddit.com/r/HFY" target="_blank">r/HFY</a> wiki</li> \n  <li>Enter a link to any reddit post</li>',T(n,"class","heading svelte-5ajakl"),T(l,"class","search svelte-5ajakl"),T(l,"placeholder","Search or URL..."),T(s,"type","submit"),s.value="Go",T(s,"class","submit svelte-5ajakl"),s.disabled=u=!e[0].trim().length,T(s,"name","search"),T(a,"class","svelte-5ajakl"),T(c,"class","form svelte-5ajakl"),T(h,"class","spaceabove svelte-5ajakl")},m(t,r){var u;g(t,n,r),g(t,o,r),g(t,c,r),m(c,a),m(a,l),A(l,e[0]),m(a,i),m(a,s),g(t,f,r),C&&C.m(t,r),g(t,d,r),g(t,h,r),g(t,p,r),g(t,b,r),y||(w=[x(l,"input",e[2]),x(c,"submit",(u=e[3],function(t){return t.stopPropagation(),u.call(this,t)}))],y=!0)},p(t,[e]){1&e&&l.value!==t[0]&&A(l,t[0]),1&e&&u!==(u=!t[0].trim().length)&&(s.disabled=u),1&e&&(S=!t[0].trim().length),S?C||(C=Ct(),C.c(),C.m(d.parentNode,d)):C&&(C.d(1),C=null)},i:t,o:t,d(t){t&&$(n),t&&$(o),t&&$(c),t&&$(f),C&&C.d(t),t&&$(d),t&&$(h),t&&$(p),t&&$(b),y=!1,r(w)}}}function Et(t,e,n){let{search:r=""}=e,{goNext:o}=e;return t.$$set=t=>{"search"in t&&n(0,r=t.search),"goNext"in t&&n(1,o=t.goNext)},[r,o,function(){r=this.value,n(0,r)},()=>o(r)]}const _t=class extends nt{constructor(t){super(),et(this,t,Et,At,c,{search:0,goNext:1})}};function Ot(e){let n,r,c,a,l,i,s,u,f=e[0]?": ":"",d=(e[0].message||e[0])+"";return{c(){n=v("p"),r=y("Sorry, can't process that"),c=y(f),a=y(d),l=k(),i=v("button"),i.textContent="Retry",T(n,"class","error svelte-alvqhf")},m(t,f){g(t,n,f),m(n,r),m(n,c),m(n,a),g(t,l,f),g(t,i,f),s||(u=x(i,"click",(function(){o(e[1])&&e[1].apply(this,arguments)})),s=!0)},p(t,[n]){e=t,1&n&&f!==(f=e[0]?": ":"")&&C(c,f),1&n&&d!==(d=(e[0].message||e[0])+"")&&C(a,d)},i:t,o:t,d(t){t&&$(n),t&&$(l),t&&$(i),s=!1,u()}}}function Nt(t,e,n){let{error:r}=e,{retry:o}=e;return t.$$set=t=>{"error"in t&&n(0,r=t.error),"retry"in t&&n(1,o=t.retry)},[r,o]}const jt=class extends nt{constructor(t){super(),et(this,t,Nt,Ot,c,{error:0,retry:1})}};function Dt(t){let e,n,r,o,c;const a=t[1].default,l=i(a,t,t[0],null),s=l||function(t){let e;return{c(){e=y("Loading...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}();return{c(){e=v("div"),n=v("div"),n.innerHTML='<span class="loading-slider svelte-p1cdob">â€¢</span>',r=k(),o=v("p"),s&&s.c(),T(n,"class","loading-slider-container svelte-p1cdob"),T(o,"class","loading svelte-p1cdob"),T(e,"class","loading-container svelte-p1cdob")},m(t,a){g(t,e,a),m(e,n),m(e,r),m(e,o),s&&s.m(o,null),c=!0},p(t,[e]){l&&l.p&&(!c||1&e)&&f(l,a,t,t[0],c?u(a,t[0],e,null):d(t[0]),null)},i(t){c||(G(s,t),c=!0)},o(t){z(s,t),c=!1},d(t){t&&$(e),s&&s.d(t)}}}function Pt(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}const Rt=class extends nt{constructor(t){super(),et(this,t,Pt,Dt,c,{})}};function Ht(t,e,n){const r=t.slice();return r[8]=e[n],r}function Lt(t){let e,n;return e=new jt({props:{error:t[11],retry:t[5]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[11]),4&n&&(r.retry=t[5]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Ft(e){let n,r,o,c,a,l,i,s,u=e[7],f=[];for(let t=0;t<u.length;t+=1)f[t]=Mt(Ht(e,u,t));return{c(){n=v("p"),r=y("The search for '"),o=y(e[0]),c=y("' returned these results:"),a=k(),l=v("ul");for(let t=0;t<f.length;t+=1)f[t].c();i=k(),s=v("p"),s.textContent="Please select one.",T(s,"class","small")},m(t,e){g(t,n,e),m(n,r),m(n,o),m(n,c),g(t,a,e),g(t,l,e);for(let t=0;t<f.length;t+=1)f[t].m(l,null);g(t,i,e),g(t,s,e)},p(t,e){if(1&e&&C(o,t[0]),6&e){let n;for(u=t[7],n=0;n<u.length;n+=1){const r=Ht(t,u,n);f[n]?f[n].p(r,e):(f[n]=Mt(r),f[n].c(),f[n].m(l,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}},i:t,o:t,d(t){t&&$(n),t&&$(a),t&&$(l),b(f,t),t&&$(i),t&&$(s)}}}function Ut(t){let e,n,r,o,c=t[8].author+"";return{c(){e=y("["),n=v("i"),r=y(c),o=y("]")},m(t,c){g(t,e,c),g(t,n,c),m(n,r),g(t,o,c)},p(t,e){4&e&&c!==(c=t[8].author+"")&&C(r,c)},d(t){t&&$(e),t&&$(n),t&&$(o)}}}function Mt(t){let e,n,r,o,c,a,l,i,s=t[8].title+"";function u(){return t[4](t[8])}let f=t[8].author&&Ut(t);return{c(){e=v("li"),n=v("a"),r=y(s),c=k(),f&&f.c(),a=k(),T(n,"href",o=gt(t[8].url))},m(t,o){g(t,e,o),m(e,n),m(n,r),m(e,c),f&&f.m(e,null),m(e,a),l||(i=x(n,"click",S(u)),l=!0)},p(c,l){t=c,4&l&&s!==(s=t[8].title+"")&&C(r,s),4&l&&o!==(o=gt(t[8].url))&&T(n,"href",o),t[8].author?f?f.p(t,l):(f=Ut(t),f.c(),f.m(e,a)):f&&(f.d(1),f=null)},d(t){t&&$(e),f&&f.d(),l=!1,i()}}}function Bt(t){let e,n;return e=new Rt({props:{$$slots:{default:[It]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4096&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function It(t){let e;return{c(){e=y("Please wait, fetching results...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Wt(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Bt,then:Ft,catch:Lt,value:7,error:11,blocks:[,,,]};return V(n=t[2],o),{c(){e=w(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,4&r&&n!==(n=t[2])&&V(n,o)||X(o,t,r)},i(t){r||(G(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1)z(o.blocks[t]);r=!1},d(t){t&&$(e),o.block.d(t),o.token=null,o=null}}}function Yt(t,e,n){let{search:r}=e,{goNext:o}=e;const c=r.toLowerCase(),a=()=>pt("https://api.reddit.com/r/hfy/wiki/series.json").then((t=>t.json())).then((t=>t.data.content_md)).then((t=>[...t.matchAll(/\[([^\]]+)\]\s*\(((?:https?:\/\/(?:[^.]+\.)?reddit\.com)?\/r\/hfy\/wiki\/series\/[^)]+)\)\s*(?:\[\*([^\]]+)\*\])?/gim)].map((t=>({title:t[1],author:t[3],url:mt(t[2].startsWith("http")?t[2]:`https://api.reddit.com${t[2]}`)}))))).then((t=>t.filter((t=>-1!==t.title.toLowerCase().indexOf(c))))).then((t=>{if(!t.length)throw new Error(`No series matched input \`${r}\``);return t}));let l=a();return t.$$set=t=>{"search"in t&&n(0,r=t.search),"goNext"in t&&n(1,o=t.goNext)},[r,o,l,a,t=>o({url:t.url,type:ut.HFY_SERIES}),()=>n(2,l=a())]}const qt=class extends nt{constructor(t){super(),et(this,t,Yt,Wt,c,{search:0,goNext:1})}};function Kt(t){let e,n,r;return{c(){e=v("a"),e.textContent="Back to Search",T(e,"href","#?"),T(e,"class","small")},m(c,a){g(c,e,a),n||(r=x(e,"click",S((function(){o(t[0])&&t[0].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,r()}}}function Gt(e){let n,r=e[0]&&Kt(e);return{c(){r&&r.c(),n=w()},m(t,e){r&&r.m(t,e),g(t,n,e)},p(t,[e]){t[0]?r?r.p(t,e):(r=Kt(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&$(n)}}}function zt(t,e,n){let{backToSearch:r}=e;return t.$$set=t=>{"backToSearch"in t&&n(0,r=t.backToSearch)},[r]}const Vt=class extends nt{constructor(t){super(),et(this,t,zt,Gt,c,{backToSearch:0})}};function Xt(t){let e,n,r;return{c(){e=v("input"),T(e,"type","text"),T(e,"placeholder","Title")},m(o,c){g(o,e,c),A(e,t[0]),n||(r=x(e,"input",t[9]),n=!0)},p(t,n){1&n&&e.value!==t[0]&&A(e,t[0])},d(t){t&&$(e),n=!1,r()}}}function Jt(t){let e,n,r;return{c(){e=v("a"),n=y(t[0]),T(e,"href",r=gt(t[3])),T(e,"target","_blank")},m(t,r){g(t,e,r),m(e,n)},p(t,o){1&o&&C(n,t[0]),8&o&&r!==(r=gt(t[3]))&&T(e,"href",r)},d(t){t&&$(e)}}}function Qt(t){let e,n,r;return{c(){e=v("input"),T(e,"type","text"),T(e,"placeholder","Author")},m(o,c){g(o,e,c),A(e,t[1]),n||(r=x(e,"input",t[10]),n=!0)},p(t,n){2&n&&e.value!==t[1]&&A(e,t[1])},d(t){t&&$(e),n=!1,r()}}}function Zt(t){let e;return{c(){e=y(t[1])},m(t,n){g(t,e,n)},p(t,n){2&n&&C(e,t[1])},d(t){t&&$(e)}}}function te(t){let e,n,r,o;const c=t[8].default,a=i(c,t,t[7],null);return{c(){e=v("h3"),e.textContent="Chapters",n=k(),r=v("div"),a&&a.c()},m(t,c){g(t,e,c),g(t,n,c),g(t,r,c),a&&a.m(r,null),o=!0},p(t,e){a&&a.p&&(!o||128&e)&&f(a,c,t,t[7],o?u(c,t[7],e,null):d(t[7]),null)},i(t){o||(G(a,t),o=!0)},o(t){z(a,t),o=!1},d(t){t&&$(e),t&&$(n),t&&$(r),a&&a.d(t)}}}function ee(t){let e,n,r,c,a,l=t[5]&&ne(t);return{c(){e=v("div"),n=v("button"),n.textContent="Save",r=k(),l&&l.c(),T(n,"type","submit"),T(e,"class","save svelte-1f1cqar")},m(i,s){g(i,e,s),m(e,n),m(e,r),l&&l.m(e,null),c||(a=x(n,"click",(function(){o(t[4])&&t[4].apply(this,arguments)})),c=!0)},p(n,r){(t=n)[5]?l?l.p(t,r):(l=ne(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(t){t&&$(e),l&&l.d(),c=!1,a()}}}function ne(t){let e,n,r;return{c(){e=v("a"),e.textContent="Cancel",T(e,"href","#?"),T(e,"class","small")},m(c,a){g(c,e,a),n||(r=x(e,"click",S((function(){o(t[5])&&t[5].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,r()}}}function re(t){let e,n,r,c,a,l,i,s,u,f,d,h,p;function b(t,e){return t[2]?Xt:Jt}let y=b(t),w=y(t);function C(t,e){return t[2]?Qt:Zt}let A=C(t),E=A(t),_=t[6].default&&te(t),O=t[2]&&t[4]&&ee(t);return{c(){e=v("form"),n=v("h3"),n.textContent="Title",r=k(),c=v("p"),w.c(),a=k(),l=v("h3"),l.textContent="Author",i=k(),s=v("p"),E.c(),u=k(),_&&_.c(),f=k(),O&&O.c(),T(e,"class","series-card svelte-1f1cqar")},m($,b){g($,e,b),m(e,n),m(e,r),m(e,c),w.m(c,null),m(e,a),m(e,l),m(e,i),m(e,s),E.m(s,null),m(e,u),_&&_.m(e,null),m(e,f),O&&O.m(e,null),d=!0,h||(p=x(e,"submit",S((function(){o(t[4])&&t[4].apply(this,arguments)}))),h=!0)},p(n,[r]){y===(y=b(t=n))&&w?w.p(t,r):(w.d(1),w=y(t),w&&(w.c(),w.m(c,null))),A===(A=C(t))&&E?E.p(t,r):(E.d(1),E=A(t),E&&(E.c(),E.m(s,null))),t[6].default?_?(_.p(t,r),64&r&&G(_,1)):(_=te(t),_.c(),G(_,1),_.m(e,f)):_&&(q(),z(_,1,1,(()=>{_=null})),K()),t[2]&&t[4]?O?O.p(t,r):(O=ee(t),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i(t){d||(G(_),d=!0)},o(t){z(_),d=!1},d(t){t&&$(e),w.d(),E.d(),_&&_.d(),O&&O.d(),h=!1,p()}}}function oe(t,e,n){let{$$slots:r={},$$scope:o}=e;const c=function(t){const e={};for(const n in t)e[n]=!0;return e}(r);let{edit:a=!1}=e,{title:l}=e,{author:i}=e,{url:s=""}=e,{onSubmit:u}=e,{onCancel:f}=e;return t.$$set=t=>{"edit"in t&&n(2,a=t.edit),"title"in t&&n(0,l=t.title),"author"in t&&n(1,i=t.author),"url"in t&&n(3,s=t.url),"onSubmit"in t&&n(4,u=t.onSubmit),"onCancel"in t&&n(5,f=t.onCancel),"$$scope"in t&&n(7,o=t.$$scope)},[l,i,a,s,u,f,c,o,r,function(){l=this.value,n(0,l)},function(){i=this.value,n(1,i)}]}const ce=class extends nt{constructor(t){super(),et(this,t,oe,re,c,{edit:2,title:0,author:1,url:3,onSubmit:4,onCancel:5})}};function ae(t,e,n){const r=t.slice();return r[18]=e[n],r}function le(t){let e,n,r,o;return e=new jt({props:{error:t[21],retry:t[16]}}),r=new Vt({props:{backToSearch:t[3]}}),{c(){Q(e.$$.fragment),n=k(),Q(r.$$.fragment)},m(t,c){Z(e,t,c),g(t,n,c),Z(r,t,c),o=!0},p(t,n){const o={};256&n&&(o.error=t[21]),256&n&&(o.retry=t[16]),e.$set(o);const c={};8&n&&(c.backToSearch=t[3]),r.$set(c)},i(t){o||(G(e.$$.fragment,t),G(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){tt(e,t),t&&$(n),tt(r,t)}}}function ie(t){let e,n,r,o,c,a,l,i,s,u,f,d;function h(t,e){return(null==c||256&e)&&(c=!!t[17].chapters.find(ye)),c?ge:me}r=new ce({props:{title:t[17].title,author:t[17].author,url:t[0].url,$$slots:{default:[pe]},$$scope:{ctx:t}}});let p=h(t,-1),m=p(t);function b(){return t[15](t[17])}return s=new Vt({props:{backToSearch:t[3]}}),{c(){e=y("Got the following series:\n\n  "),n=v("div"),Q(r.$$.fragment),o=k(),m.c(),a=k(),l=v("button"),l.textContent="Edit book",i=k(),Q(s.$$.fragment),T(n,"class","list svelte-r5r0jj")},m(t,c){g(t,e,c),g(t,n,c),Z(r,n,null),g(t,o,c),m.m(t,c),g(t,a,c),g(t,l,c),g(t,i,c),Z(s,t,c),u=!0,f||(d=x(l,"click",b),f=!0)},p(e,n){t=e;const o={};256&n&&(o.title=t[17].title),256&n&&(o.author=t[17].author),1&n&&(o.url=t[0].url),4194722&n&&(o.$$scope={dirty:n,ctx:t}),r.$set(o),p===(p=h(t,n))&&m?m.p(t,n):(m.d(1),m=p(t),m&&(m.c(),m.m(a.parentNode,a)));const c={};8&n&&(c.backToSearch=t[3]),s.$set(c)},i(t){u||(G(r.$$.fragment,t),G(s.$$.fragment,t),u=!0)},o(t){z(r.$$.fragment,t),z(s.$$.fragment,t),u=!1},d(t){t&&$(e),t&&$(n),tt(r),t&&$(o),m.d(t),t&&$(a),t&&$(l),t&&$(i),tt(s,t),f=!1,d()}}}function se(t){let e;return{c(){e=y("hide")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function ue(t){let e;return{c(){e=y("show")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function fe(t){let e,n,r;return{c(){e=y("Found "),n=y(t[1]),r=y(" new")},m(t,o){g(t,e,o),g(t,n,o),g(t,r,o)},p(t,e){2&e&&C(n,t[1])},d(t){t&&$(e),t&&$(n),t&&$(r)}}}function de(t){let e,n=t[17].chapters,r=[];for(let e=0;e<n.length;e+=1)r[e]=he(ae(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();T(e,"class","chapter-list svelte-r5r0jj")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(256&o){let c;for(n=t[17].chapters,c=0;c<n.length;c+=1){const a=ae(t,n,c);r[c]?r[c].p(a,o):(r[c]=he(a),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(t){t&&$(e),b(r,t)}}}function he(t){let e,n,r,o=t[18].title+"";return{c(){e=v("a"),n=y(o),T(e,"href",r=gt(t[18].url)),T(e,"target","_blank"),T(e,"class","small")},m(t,r){g(t,e,r),m(e,n)},p(t,c){256&c&&o!==(o=t[18].title+"")&&C(n,o),256&c&&r!==(r=gt(t[18].url))&&T(e,"href",r)},d(t){t&&$(e)}}}function pe(t){let e,n,o,c,a,l,i,s,u,f,d,h,p,b,A=t[17].chapters.length+"";function E(t,e){return t[7]?se:ue}let _=E(t),O=_(t);function N(){return t[12](t[17])}let j="number"==typeof t[1]&&fe(t),D=t[7]&&de(t);return{c(){e=v("p"),n=y("Found "),o=y(A),c=k(),a=v("a"),O.c(),l=k(),i=v("span"),s=k(),u=v("button"),u.textContent="Find more",f=k(),j&&j.c(),d=k(),D&&D.c(),h=w(),T(a,"href","#show"),T(a,"class","small"),T(i,"class","spacer svelte-r5r0jj"),T(e,"class","no-margin svelte-r5r0jj")},m(r,$){g(r,e,$),m(e,n),m(e,o),m(e,c),m(e,a),O.m(a,null),m(e,l),m(e,i),m(e,s),m(e,u),m(e,f),j&&j.m(e,null),g(r,d,$),D&&D.m(r,$),g(r,h,$),p||(b=[x(a,"click",S(t[11])),x(u,"click",N)],p=!0)},p(n,r){t=n,256&r&&A!==(A=t[17].chapters.length+"")&&C(o,A),_!==(_=E(t))&&(O.d(1),O=_(t),O&&(O.c(),O.m(a,null))),"number"==typeof t[1]?j?j.p(t,r):(j=fe(t),j.c(),j.m(e,null)):j&&(j.d(1),j=null),t[7]?D?D.p(t,r):(D=de(t),D.c(),D.m(h.parentNode,h)):D&&(D.d(1),D=null)},d(t){t&&$(e),O.d(),j&&j.d(),t&&$(d),D&&D.d(t),t&&$(h),p=!1,r(b)}}}function me(t){let e,n,r;function o(){return t[14](t[17])}return{c(){e=v("button"),e.textContent="Generate EPUB"},m(t,c){g(t,e,c),n||(r=x(e,"click",o),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,r()}}}function ge(t){let e,n,r;function o(){return t[13](t[17])}return{c(){e=v("button"),e.textContent="Fetch chapter contents"},m(t,c){g(t,e,c),n||(r=x(e,"click",o),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,r()}}}function $e(t){let e,n;return e=new Rt({props:{$$slots:{default:[be]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function be(t){let e;return{c(){e=y("Please wait, fetching data...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function ve(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:$e,then:ie,catch:le,value:17,error:21,blocks:[,,,]};return V(n=t[8],o),{c(){e=w(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,256&r&&n!==(n=t[8])&&V(n,o)||X(o,t,r)},i(t){r||(G(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1)z(o.blocks[t]);r=!1},d(t){t&&$(e),o.block.d(t),o.token=null,o=null}}}const ye=t=>!1!==t.needsFetching;function ke(t,e,n){let{series:r}=e,{bookData:o}=e,{newChapters:c}=e,{goNext:a}=e,{backToSearch:l}=e,{edit:i}=e,{findMore:s}=e,{downloadAll:u}=e,f=!1;const d=()=>o?Promise.resolve(Object.assign(Object.assign({},o),{chapters:o.chapters.map((t=>Object.assign({},t)))})):function(t){return e=void 0,n=void 0,o=function(){var e,n,r;return function(t,e){var n,r,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function l(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(o){switch(o.label){case 0:return[4,pt(t.url)];case 1:return[4,(e=o.sent()).json()];case 2:if(n=o.sent(),!e.ok)throw n.message;if(!(r=function(t,e){switch(t){case ut.HFY_SERIES:return{author:(r=e.data.content_md).match(/\[\*\*([^*\]]+)\*\*\]|A Story By \[(?:\*\*)?([^\]]+?)(?:\*\*)?\]/i).slice(1).find(Boolean),title:null===(n=r.match(/##?\s*\*\*(.+)\*\*/))||void 0===n?void 0:n[1],chapters:kt([],yt(r.matchAll(bt)),!1).map((function(t){return{title:t[1],url:mt(t[2].startsWith("http")?t[2]:"https://api.reddit.com"+t[2])}}))};case ut.POST:return function(t){return{author:t[0].data.children[0].data.author,title:$t(t[0].data.children[0].data.title),chapters:[St(t)]}}(e)}var n,r;throw new Error("Getting data from source type `"+ut[t]+"` not supported, this should never happen")}(t.type,n))||!r.chapters||!r.chapters.length)throw new Error("No chapters found");return[2,r]}}))},new((r=void 0)||(r=Promise))((function(t,c){function a(t){try{i(o.next(t))}catch(t){c(t)}}function l(t){try{i(o.throw(t))}catch(t){c(t)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,l)}i((o=o.apply(e,n||[])).next())}));var e,n,r,o}(r);let h=d();return t.$$set=t=>{"series"in t&&n(0,r=t.series),"bookData"in t&&n(10,o=t.bookData),"newChapters"in t&&n(1,c=t.newChapters),"goNext"in t&&n(2,a=t.goNext),"backToSearch"in t&&n(3,l=t.backToSearch),"edit"in t&&n(4,i=t.edit),"findMore"in t&&n(5,s=t.findMore),"downloadAll"in t&&n(6,u=t.downloadAll)},[r,c,a,l,i,s,u,f,h,d,o,()=>n(7,f=!f),t=>s(t),t=>u(t),t=>a(t),t=>i(t),()=>n(8,h=d())]}const we=class extends nt{constructor(t){super(),et(this,t,ke,ve,c,{series:0,bookData:10,newChapters:1,goNext:2,backToSearch:3,edit:4,findMore:5,downloadAll:6})}};function xe(t){let e,n,r,o;function c(e){t[6](e)}function a(e){t[7](e)}let l={edit:!0,onSubmit:t[4],onCancel:t[5]};return void 0!==t[1].title&&(l.title=t[1].title),void 0!==t[1].author&&(l.author=t[1].author),e=new ce({props:l}),N.push((()=>J(e,"title",c))),N.push((()=>J(e,"author",a))),{c(){Q(e.$$.fragment)},m(t,n){Z(e,t,n),o=!0},p(t,[o]){const c={};3&o&&(c.onSubmit=t[4]),1&o&&(c.onCancel=t[5]),!n&&2&o&&(n=!0,c.title=t[1].title,L((()=>n=!1))),!r&&2&o&&(r=!0,c.author=t[1].author,L((()=>r=!1))),e.$set(c)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){tt(e,t)}}}function Se(t,e,n){let{bookData:r}=e,{goNext:o}=e;const c=Object.assign(Object.assign({},r),{chapters:r.chapters.map((t=>Object.assign({},t)))}),a=Object.assign(Object.assign({},r),{chapters:r.chapters.map((t=>Object.assign({},t)))});return t.$$set=t=>{"bookData"in t&&n(3,r=t.bookData),"goNext"in t&&n(0,o=t.goNext)},[o,a,c,r,()=>o(a),()=>o(c),function(e){t.$$.not_equal(a.title,e)&&(a.title=e,n(1,a))},function(e){t.$$.not_equal(a.author,e)&&(a.author=e,n(1,a))}]}const Te=class extends nt{constructor(t){super(),et(this,t,Se,xe,c,{bookData:3,goNext:0})}};function Ce(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ae(t){let e,n;return e=new jt({props:{error:t[12],retry:t[5]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[12]),4&n&&(r.retry=t[5]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Ee(e){let n,r=e[0](e[11],e[1].length)+"";return{c(){n=y(r)},m(t,e){g(t,n,e)},p(t,e){7&e&&r!==(r=t[0](t[11],t[1].length)+"")&&C(n,r)},i:t,o:t,d(t){t&&$(n)}}}function _e(t){let e,n,r,o;e=new Rt({props:{$$slots:{default:[Oe]},$$scope:{ctx:t}}});let c=t[1],a=[];for(let e=0;e<c.length;e+=1)a[e]=Ne(Ce(t,c,e));return{c(){Q(e.$$.fragment),n=k(),r=v("div");for(let t=0;t<a.length;t+=1)a[t].c();T(r,"class","chapters")},m(t,c){Z(e,t,c),g(t,n,c),g(t,r,c);for(let t=0;t<a.length;t+=1)a[t].m(r,null);o=!0},p(t,n){const o={};if(8192&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),2&n){let e;for(c=t[1],e=0;e<c.length;e+=1){const o=Ce(t,c,e);a[e]?a[e].p(o,n):(a[e]=Ne(o),a[e].c(),a[e].m(r,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){tt(e,t),t&&$(n),t&&$(r),b(a,t)}}}function Oe(t){let e;return{c(){e=y("Please wait, fetching chapters...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Ne(t){let e,n,r,o,c,a,l=t[8].from+"",i=t[8].url+"";return{c(){e=v("p"),n=y(l),r=y(": Extracted "),o=v("a"),c=y(i),T(o,"href",a=t[8].url),T(e,"class","valid small svelte-188oh31")},m(t,a){g(t,e,a),m(e,n),m(e,r),m(e,o),m(o,c)},p(t,e){2&e&&l!==(l=t[8].from+"")&&C(n,l),2&e&&i!==(i=t[8].url+"")&&C(c,i),2&e&&a!==(a=t[8].url)&&T(o,"href",a)},d(t){t&&$(e)}}}function je(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:_e,then:Ee,catch:Ae,value:11,error:12,blocks:[,,,]};return V(n=t[2],o),{c(){e=w(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,4&r&&n!==(n=t[2])&&V(n,o)||X(o,t,r)},i(t){r||(G(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1)z(o.blocks[t]);r=!1},d(t){t&&$(e),o.block.d(t),o.token=null,o=null}}}function De(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function l(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}i((r=r.apply(t,e||[])).next())}))};let o,{bookData:c}=e,{goNext:a}=e,l=[];const i=()=>r(void 0,void 0,void 0,(function*(){for(o=c.chapters.map((t=>Object.assign({},t)));;){let t=o[o.length-1];if(!1!==t.needsFetching){const e=yield pt(t.url),n=yield e.json();if(!e.ok)throw n.message;o.splice(-1,1,t=St(n))}const e=Tt(t.content);if(!e)break;const r=mt(e);if(o.find((t=>t.url===r)))break;l.push({from:t.title,url:e}),n(1,l);const c=yield pt(r),a=yield c.json();if(!c.ok)throw a.message;o.push(St(a))}return Object.assign(Object.assign({},c),{chapters:o})}));let s=i();return t.$$set=t=>{"bookData"in t&&n(4,c=t.bookData),"goNext"in t&&n(0,a=t.goNext)},[a,l,s,i,c,()=>n(2,s=i())]}const Pe=class extends nt{constructor(t){super(),et(this,t,De,je,c,{bookData:4,goNext:0})}};function Re(t,e,n){const r=t.slice();return r[7]=e[n],r}function He(t){let e,n;return e=new jt({props:{error:t[11],retry:t[5]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[11]),4&n&&(r.retry=t[5]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Le(e){let n,r=e[0](e[10])+"";return{c(){n=y(r)},m(t,e){g(t,n,e)},p(t,e){5&e&&r!==(r=t[0](t[10])+"")&&C(n,r)},i:t,o:t,d(t){t&&$(n)}}}function Fe(t){let e,n,r,o;e=new Rt({props:{$$slots:{default:[Ue]},$$scope:{ctx:t}}});let c=t[1],a=[];for(let e=0;e<c.length;e+=1)a[e]=Be(Re(t,c,e));return{c(){Q(e.$$.fragment),n=k(),r=v("div");for(let t=0;t<a.length;t+=1)a[t].c();T(r,"class","chapters svelte-ljz7v6")},m(t,c){Z(e,t,c),g(t,n,c),g(t,r,c);for(let t=0;t<a.length;t+=1)a[t].m(r,null);o=!0},p(t,n){const o={};if(4096&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),2&n){let e;for(c=t[1],e=0;e<c.length;e+=1){const o=Re(t,c,e);a[e]?a[e].p(o,n):(a[e]=Be(o),a[e].c(),a[e].m(r,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){tt(e,t),t&&$(n),t&&$(r),b(a,t)}}}function Ue(t){let e;return{c(){e=y("Please wait, fetching chapters...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Me(t){let e,n,r=t[7].title+"";return{c(){e=v("p"),n=y(r),T(e,"class","valid small svelte-ljz7v6")},m(t,r){g(t,e,r),m(e,n)},p(t,e){2&e&&r!==(r=t[7].title+"")&&C(n,r)},d(t){t&&$(e)}}}function Be(t){let e,n=t[7]&&Me(t);return{c(){n&&n.c(),e=w()},m(t,r){n&&n.m(t,r),g(t,e,r)},p(t,r){t[7]?n?n.p(t,r):(n=Me(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&$(e)}}}function Ie(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Fe,then:Le,catch:He,value:10,error:11,blocks:[,,,]};return V(n=t[2],o),{c(){e=w(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,4&r&&n!==(n=t[2])&&V(n,o)||X(o,t,r)},i(t){r||(G(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1)z(o.blocks[t]);r=!1},d(t){t&&$(e),o.block.d(t),o.token=null,o=null}}}function We(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function l(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}i((r=r.apply(t,e||[])).next())}))};let o,{data:c}=e,{goNext:a}=e;const l=()=>r(void 0,void 0,void 0,(function*(){n(1,o=new Array(c.chapters.length));for(let t=0;t<c.chapters.length;t+=100)yield Promise.all(c.chapters.slice(t,t+100).map(((e,r)=>!1!==e.needsFetching?pt(e.url).then((t=>t.json())).then((e=>{n(1,o[r+t]=St(e),o),n(1,o)})):void n(1,o[r+t]=Object.assign({},e),o))));return Object.assign(Object.assign({},c),{chapters:o})}));let i=l();return t.$$set=t=>{"data"in t&&n(4,c=t.data),"goNext"in t&&n(0,a=t.goNext)},[a,o,i,l,c,()=>n(2,i=l())]}const Ye=class extends nt{constructor(t){super(),et(this,t,We,Ie,c,{data:4,goNext:0})}};var qe=l(4785),Ke=l.n(qe);function Ge(t){let e,n,r,o;return e=new jt({props:{error:t[9],retry:t[5]}}),r=new Vt({props:{backToSearch:t[1]}}),{c(){Q(e.$$.fragment),n=k(),Q(r.$$.fragment)},m(t,c){Z(e,t,c),g(t,n,c),Z(r,t,c),o=!0},p(t,n){const o={};4&n&&(o.error=t[9]),4&n&&(o.retry=t[5]),e.$set(o);const c={};2&n&&(c.backToSearch=t[1]),r.$set(c)},i(t){o||(G(e.$$.fragment,t),G(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){tt(e,t),t&&$(n),tt(r,t)}}}function ze(t){let e,n,r,o,c,a,l,i;function s(){return t[4](t[8])}return c=new Vt({props:{backToSearch:t[1]}}),{c(){e=v("h3"),e.textContent="Your ebook is ready!",n=k(),r=v("button"),r.textContent="Download",o=k(),Q(c.$$.fragment),T(e,"class","valid svelte-188oh31")},m(t,u){g(t,e,u),g(t,n,u),g(t,r,u),g(t,o,u),Z(c,t,u),a=!0,l||(i=x(r,"click",s),l=!0)},p(e,n){t=e;const r={};2&n&&(r.backToSearch=t[1]),c.$set(r)},i(t){a||(G(c.$$.fragment,t),a=!0)},o(t){z(c.$$.fragment,t),a=!1},d(t){t&&$(e),t&&$(n),t&&$(r),t&&$(o),tt(c,t),l=!1,i()}}}function Ve(t){let e,n;return e=new Rt({props:{$$slots:{default:[Xe]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};1024&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Xe(t){let e;return{c(){e=y("Please wait, generating ebook...")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Je(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Ve,then:ze,catch:Ge,value:8,error:9,blocks:[,,,]};return V(n=t[2],o),{c(){e=w(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,4&r&&n!==(n=t[2])&&V(n,o)||X(o,t,r)},i(t){r||(G(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1)z(o.blocks[t]);r=!1},d(t){t&&$(e),o.block.d(t),o.token=null,o=null}}}function Qe(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function l(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}i((r=r.apply(t,e||[])).next())}))};let{data:o}=e,{backToSearch:c}=e;const a=Promise.all([l.e(87),l.e(483)]).then(l.t.bind(l,5087,23)),i=()=>r(void 0,void 0,void 0,(function*(){const{default:t}=yield a;return yield t({title:o.title,author:o.author},o.chapters.map((t=>Object.assign(Object.assign({},t),{content:t.content}))),!1)}));let s=i();return t.$$set=t=>{"data"in t&&n(0,o=t.data),"backToSearch"in t&&n(1,c=t.backToSearch)},[o,c,s,i,t=>Ke()(t,`${o.author} - ${o.title}.epub`,"application/epub+zip"),()=>n(2,s=i())]}const Ze=class extends nt{constructor(t){super(),et(this,t,Qe,Je,c,{data:0,backToSearch:1})}};function tn(t){let e,n;return e=new Ze({props:{data:t[4],backToSearch:t[6]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.data=t[4]),64&n&&(r.backToSearch=t[6]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function en(t){let e,n;return e=new Ye({props:{goNext:t[16],data:t[4]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};51&n&&(r.goNext=t[16]),16&n&&(r.data=t[4]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function nn(t){let e,n;return e=new Pe({props:{goNext:t[15],bookData:t[4]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};51&n&&(r.goNext=t[15]),16&n&&(r.bookData=t[4]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function rn(t){let e,n;return e=new Te({props:{goNext:t[14],bookData:t[4]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};51&n&&(r.goNext=t[14]),16&n&&(r.bookData=t[4]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function on(t){let e,n;return e=new we({props:{goNext:t[10],series:t[3],bookData:t[4],newChapters:t[5],backToSearch:t[6],edit:t[11],findMore:t[12],downloadAll:t[13]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};19&n&&(r.goNext=t[10]),8&n&&(r.series=t[3]),16&n&&(r.bookData=t[4]),32&n&&(r.newChapters=t[5]),64&n&&(r.backToSearch=t[6]),19&n&&(r.edit=t[11]),19&n&&(r.findMore=t[12]),19&n&&(r.downloadAll=t[13]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function cn(t){let e,n;return e=new qt({props:{goNext:t[9],search:t[2]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};11&n&&(r.goNext=t[9]),4&n&&(r.search=t[2]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function an(t){let e,n;return e=new _t({props:{goNext:t[7],search:t[2]}}),{c(){Q(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.search=t[2]),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function ln(e){let n,r,o,c,a;return{c(){n=v("div"),r=k(),o=v("a"),o.textContent="Go back home",T(o,"href","#?"),T(o,"class","homelink svelte-7yvz92")},m(t,l){g(t,n,l),g(t,r,l),g(t,o,l),c||(a=x(o,"click",S(e[17])),c=!0)},p:t,d(t){t&&$(n),t&&$(r),t&&$(o),c=!1,a()}}}function sn(t){let e,n,r,o,c,a,l,i,s,u;n=new it({});const f=[an,cn,on,rn,nn,en,tn],d=[];function h(t,e){return t[1]===t[0].INPUT?0:t[1]===t[0].SEARCH?1:t[1]===t[0].BOOK_DATA?2:t[1]===t[0].EDIT_DATA?3:t[1]===t[0].FIND_CHAPTERS?4:t[1]===t[0].DOWNLOAD_CHAPTERS?5:t[1]===t[0].RESULT?6:-1}~(c=h(t))&&(a=d[c]=f[c](t));let p=t[1]!==t[0].INPUT&&ln(t);return s=new at({}),{c(){e=v("div"),Q(n.$$.fragment),r=k(),o=v("main"),a&&a.c(),l=k(),p&&p.c(),i=k(),Q(s.$$.fragment),T(o,"class","App-main"),T(e,"class","App svelte-7yvz92")},m(t,a){g(t,e,a),Z(n,e,null),m(e,r),m(e,o),~c&&d[c].m(o,null),m(o,l),p&&p.m(o,null),m(e,i),Z(s,e,null),u=!0},p(t,[e]){let n=c;c=h(t),c===n?~c&&d[c].p(t,e):(a&&(q(),z(d[n],1,1,(()=>{d[n]=null})),K()),~c?(a=d[c],a?a.p(t,e):(a=d[c]=f[c](t),a.c()),G(a,1),a.m(o,l)):a=null),t[1]!==t[0].INPUT?p?p.p(t,e):(p=ln(t),p.c(),p.m(o,null)):p&&(p.d(1),p=null)},i(t){u||(G(n.$$.fragment,t),G(a),G(s.$$.fragment,t),u=!0)},o(t){z(n.$$.fragment,t),z(a),z(s.$$.fragment,t),u=!1},d(t){t&&$(e),tt(n),~c&&d[c].d(),p&&p.d(),tt(s)}}}function un(t,e,n){var r;!function(t){t[t.INPUT=0]="INPUT",t[t.SEARCH=1]="SEARCH",t[t.BOOK_DATA=2]="BOOK_DATA",t[t.EDIT_DATA=3]="EDIT_DATA",t[t.FIND_CHAPTERS=4]="FIND_CHAPTERS",t[t.DOWNLOAD_CHAPTERS=5]="DOWNLOAD_CHAPTERS",t[t.RESULT=6]="RESULT"}(r||(r={}));let o,c,a,l,i,s=r.INPUT,u=!1;return t.$$.update=()=>{257&t.$$.dirty&&n(6,i=u?()=>n(1,s=r.SEARCH):void 0),t.$$.dirty,3&t.$$.dirty&&(s!==r.INPUT&&s!==r.SEARCH||(n(4,a=void 0),n(5,l=void 0)))},[r,s,o,c,a,l,i,t=>{const e=function(t){try{if(new URL(t),function(t){return!!t.match(wt)}(t))return ut.HFY_SERIES;if(function(t){return!!t.match(xt)}(t))return ut.POST}catch(t){}return ut.SEARCH}(t);return n(2,o=t),n(8,u=e===ut.SEARCH),e!==ut.SEARCH&&n(3,c={url:mt(t),type:e}),e===ut.SEARCH?n(1,s=r.SEARCH):n(1,s=r.BOOK_DATA)},u,t=>(n(3,c=t),n(1,s=r.BOOK_DATA)),t=>(n(4,a=t),n(1,s=r.RESULT)),t=>(n(4,a=t),n(1,s=r.EDIT_DATA)),t=>(n(4,a=t),n(1,s=r.FIND_CHAPTERS)),t=>(n(4,a=t),n(1,s=r.DOWNLOAD_CHAPTERS)),t=>(n(4,a=t),n(5,l=void 0),n(1,s=r.BOOK_DATA)),(t,e)=>(n(4,a=t),n(5,l=e),n(1,s=r.BOOK_DATA)),t=>(n(4,a=t),n(5,l=void 0),n(1,s=r.BOOK_DATA)),()=>n(1,s=r.INPUT)]}const fn=class extends nt{constructor(t){super(),et(this,t,un,sn,c,{})}};let dn;try{dn=new fn({target:document.body})}catch(t){const e=document.createElement("div");e.className="fatal-error",e.ariaLabel="error",e.appendChild(document.createElement("h1")).textContent="Something went wrong:",e.appendChild(document.createElement("code")).textContent=t,document.body.appendChild(e)}})(),i=l.O(i)})();