!function(){"use strict";const e=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(s=r.constructor)||void 0===s?void 0:s.name)===o.name)?"string":t;var n,r,o,s})(t)===e,t=e=>t=>typeof t===e,n=e=>t=>e===t,r=e("string"),o=e("object"),s=e("array"),i=n(null),l=t("boolean"),a=n(void 0),c=e=>!(e=>null==e)(e),u=t("function"),d=t("number"),m=()=>{},h=e=>()=>e;function g(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const p=h(!1),f=h(!0);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return c(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=Array.prototype.push,y=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++){const n=e[o];r[o]=t(n,o)}return r},b=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},S=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];t(o,r)&&n.push(o)}return n},x=(e,t)=>((e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const o=e[r];if(t(o,r))return v.some(o);if(n(o,r))break}return v.none()})(e,t,p),E=Object.keys,F=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},O="undefined"!=typeof window?window:Function("return this;")(),k=(e,t)=>((e,t)=>{let n=null!=t?t:O;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),T=e=>{const t=F(v.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(v.some(e))}}},C=()=>T(e=>e.unbind()),A=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!a(r)||o+t.length<=r)};var R=tinymce.util.Tools.resolve("tinymce.PluginManager");const L=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},P=()=>D(0,0),D=(e,t)=>({major:e,minor:t}),N={nu:D,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?P():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.test(t))return r}})(e,t);if(!n)return{major:0,minor:0};const r=e=>Number(t.replace(n,"$"+e));return D(r(1),r(2))})(e,n)},unknown:P},H=(e,t)=>{const n=String(t).toLowerCase();return x(e,e=>e.search(n))},V=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,W=e=>t=>A(t,e),q=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>A(e,"edge/")&&A(e,"chrome")&&A(e,"safari")&&A(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,V],search:e=>A(e,"chrome")&&!A(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>A(e,"msie")||A(e,"trident")},{name:"Opera",versionRegexes:[V,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:W("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:W("firefox")},{name:"Safari",versionRegexes:[V,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(A(e,"safari")||A(e,"mobile/"))&&A(e,"applewebkit")}],B=[{name:"Windows",search:W("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>A(e,"iphone")||A(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:W("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:W("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:W("linux"),versionRegexes:[]},{name:"Solaris",search:W("sunos"),versionRegexes:[]},{name:"FreeBSD",search:W("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:W("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],I={browsers:h(q),oses:h(B)},j="Edge",_="Chromium",z="Opera",K="Firefox",$="Safari",U=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(j),isChromium:r(_),isIE:r("IE"),isOpera:r(z),isFirefox:r(K),isSafari:r($)}},X=()=>U({current:void 0,version:N.unknown()}),Y=U,G=(h(j),h(_),h("IE"),h(z),h(K),h($),"Windows"),J="Android",Q="Linux",Z="macOS",ee="Solaris",te="FreeBSD",ne="ChromeOS",re=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(G),isiOS:r("iOS"),isAndroid:r(J),isMacOS:r(Z),isLinux:r(Q),isSolaris:r(ee),isFreeBSD:r(te),isChromeOS:r(ne)}},oe=()=>re({current:void 0,version:N.unknown()}),se=re,ie=(h(G),h("iOS"),h(J),h(Q),h(Z),h(ee),h(te),h(ne),(e,t,n)=>{const r=I.browsers(),o=I.oses(),s=t.bind(e=>((e,t)=>((e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n]);if(r.isSome())return r}return v.none()})(t.brands,t=>{const n=t.brand.toLowerCase();return x(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:N.nu(parseInt(t.version,10),0)}))}))(r,e)).orThunk(()=>((e,t)=>H(e,t).map(e=>{const n=N.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e)).fold(X,Y),i=((e,t)=>H(e,t).map(e=>{const n=N.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(o,e).fold(oe,se),l=((e,t,n,r)=>{const o=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),l=i||r("(pointer:coarse)"),a=o||!s&&i&&r("(min-device-width:768px)"),c=s||i&&!a,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!c&&!a&&!u;return{isiPad:h(o),isiPhone:h(s),isTablet:h(a),isPhone:h(c),isTouch:h(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:h(u),isDesktop:h(d)}})(i,s,e,n);return{browser:s,os:i,deviceType:l}}),le=e=>window.matchMedia(e).matches;let ae=(e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)})(()=>ie(window.navigator.userAgent,v.from(window.navigator.userAgentData),le));const ce=Object.getPrototypeOf,ue=e=>{const t=k("ownerDocument.defaultView",e);return o(e)&&((e=>((e,t)=>{const n=((e,t)=>k(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ce(e).constructor.name))},de=e=>t=>(e=>e.dom.nodeType)(t)===e,me=de(1),he=de(3),ge=de(11),pe=e=>L(e.dom.ownerDocument),fe=e=>y(e.dom.childNodes,L),ve=e=>{const t=(e=>L(e.dom.getRootNode()))(e);return ge(n=t)&&c(n.dom.host)?v.some(t):v.none();var n},we=e=>L(e.dom.host),ye=e=>{const t=L((e=>{if(c(e.target)){const t=L(e.target);if(me(t)&&c(t.dom.shadowRoot)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return(e=>0<e.length?v.some(e[0]):v.none())(t)}}return v.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),o=(s=r,i=n,(...e)=>s(i.apply(null,e)));var s,i;return((e,t,n,r,o,s,i)=>({target:e,x:t,y:n,stop:r,prevent:o,kill:s,raw:i}))(t,e.clientX,e.clientY,n,r,o,e)},be=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Se=f,xe=(e,t,n)=>((e,t,n,r)=>((e,t,n,r,o)=>{const s=((e,t)=>n=>{e(n)&&t(ye(n))})(n,r);return e.dom.addEventListener(t,s,o),{unbind:g(be,e,t,s,o)}})(e,t,n,r,!1))(e,t,Se,n),Ee=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Fe=(e,t)=>{e.dom.removeAttribute(t)},Oe=e=>void 0!==e.style&&u(e.style.getPropertyValue),ke=e=>{const t=he(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return ve(L(t)).fold(()=>n.body.contains(t),(r=ke,o=we,e=>r(o(e))));var r,o},Te=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Oe(e)&&e.style.setProperty(t,n)},Ce=(e,t,n)=>{const r=e.dom;Te(r,t,n)},Ae=(e,t)=>{const n=e.dom;((e,t)=>{const n=E(e);for(let r=0,o=n.length;r<o;r++){const o=n[r];t(e[o],o)}})(t,(e,t)=>{Te(n,t,e)})},Re=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||ke(e)?r:Le(n,t)},Le=(e,t)=>Oe(e)?e.style.getPropertyValue(t):"",Me=(e,t)=>({left:e,top:t,translate:(n,r)=>Me(e+n,t+r)}),Pe=Me,De=e=>{const t=void 0===e?window:e;return ae().browser.isFirefox()?v.none():v.from(t.visualViewport)},Ne=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),He=e=>{const t=void 0===e?window:e,n=t.document,r=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Pe(n,r)})(L(n));return De(t).fold(()=>{const e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return Ne(r.left,r.top,n,o)},e=>Ne(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height))},Ve=(e,t,n)=>De(n).map(n=>{const r=e=>t(ye(e));return n.addEventListener(e,r),{unbind:()=>n.removeEventListener(e,r)}}).getOrThunk(()=>({unbind:m}));var We=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),qe=tinymce.util.Tools.resolve("tinymce.Env");const Be=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},Ie=e=>e.options.get("fullscreen_native"),je=e=>{return e.dom===(void 0!==(t=pe(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},_e="data-ephox-mobile-fullscreen-style",ze="position:absolute!important;",Ke="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",$e=qe.os.isAndroid(),Ue=(e,t,n)=>{const o=t=>n=>{const o=Ee(n,"style"),s=void 0===o?"no-styles":o.trim();s!==t&&(((e,t,n)=>{((e,t,n)=>{if(!(r(n)||l(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)})(n,_e,s),Ae(n,e.parseStyle(t)))},i=(e=>((e,t,n)=>S(((e,t)=>{const n=u(t)?t:p;let r=e.dom;const o=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){const e=r.parentNode,t=L(e);if(o.push(t),!0===n(t))break;r=e}return o})(e,n),t))(e,e=>M(e,"*"),void 0))(t),a=(e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t})(y(i,e=>(e=>(e=>{return S((e=>v.from(e.dom.parentNode).map(L))(t=e).map(fe).map(e=>S(e,e=>{return n=e,!(t.dom===n.dom);var n})).getOr([]),e=>M(e,"*:not(.tox-silver-sink)"));var t})(e))(e))),c=(e=>{const t=Re(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"})(n);b(a,o("display:none!important;")),b(i,o(ze+Ke+c)),o((!0===$e?"":ze)+Ke+c)(t)},Xe=We.DOM,Ye=De().fold(()=>({bind:m,unbind:m}),e=>{const t=(()=>{const e=T(m);return{...e,on:t=>e.get().each(t)}})(),n=C(),r=C(),o=(e=>{let t=null;return{cancel:()=>{i(t)||(clearTimeout(t),t=null)},throttle:(...n)=>{i(t)&&(t=setTimeout(()=>{t=null,e.apply(null,n)},50))}}})(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{t.on(t=>Ae(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})});return{bind:e=>{t.set(e),o.throttle(),n.set(Ve("resize",o.throttle)),r.set(Ve("scroll",o.throttle))},unbind:()=>{t.on(()=>{n.clear(),r.clear()}),t.clear()}}}),Ge=(e,t)=>{const n=document.body,r=document.documentElement,o=e.getContainer(),s=L(o),i=(l=s,v.from(l.dom.nextSibling).map(L)).filter(e=>(e=>me(e)&&ue(e.dom))(e)&&(e=>(e=>void 0!==e.dom.classList)(e)&&e.dom.classList.contains("tox-silver-sink"))(e));var l;const a=(e=>{const t=L(e.getElement());return ve(t).map(we).getOrThunk(()=>(e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return L(t)})(pe(t)))})(e),c=t.get(),u=L(e.getBody()),d=qe.deviceType.isTouch(),m=o.style,h=e.iframeElement,g=null==h?void 0:h.style,p=e=>{e(n,"tox-fullscreen"),e(r,"tox-fullscreen"),e(o,"tox-fullscreen"),ve(s).map(e=>we(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},f=()=>{d&&(e=>{const t=(e=>{const t=document;return 1!==(n=t).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:y(t.querySelectorAll(e),L);var n})("["+_e+"]");b(t,t=>{const n=Ee(t,_e);n&&"no-styles"!==n?Ae(t,e.parseStyle(n)):Fe(t,"style"),Fe(t,_e)})})(e.dom),p(Xe.removeClass),Ye.unbind(),v.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(c)c.fullscreenChangeHandler.unbind(),Ie(e)&&je(a)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(pe(a)),g.width=c.iframeWidth,g.height=c.iframeHeight,m.width=c.containerWidth,m.height=c.containerHeight,m.top=c.containerTop,m.left=c.containerLeft,S=i,x=c.sinkCssPosition,E=(e,t)=>{Ce(e,"position",t)},S.isSome()&&x.isSome()?v.some(E(S.getOrDie(),x.getOrDie())):v.none(),f(),w=c.scrollPos,window.scrollTo(w.x,w.y),t.set(null),Be(e,!1),e.off("remove",f);else{const n=xe(pe(a),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",n=>{Ie(e)&&(je(a)||null===t.get()||Ge(e,t))}),r={scrollPos:He(window),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:g.width,iframeHeight:g.height,fullscreenChangeHandler:n,sinkCssPosition:i.map(e=>Re(e,"position"))};d&&Ue(e.dom,s,u),g.width=g.height="100%",m.width=m.height="",p(Xe.addClass),i.each(e=>{Ce(e,"position","fixed")}),Ye.bind(s),e.on("remove",f),t.set(r),Ie(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(a),Be(e,!0)}var w,S,x,E};var Je=tinymce.util.Tools.resolve("tinymce.util.VK");const Qe=(e,t)=>n=>{n.setActive(null!==t.get());const r=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",r),()=>e.off("FullscreenStateChanged",r)};R.add("fullscreen",e=>{const t=F(null);return e.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(e),((e,t)=>{e.addCommand("mceFullScreen",()=>{Ge(e,t)})})(e,t),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:Qe(e,t),context:"any"}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:Qe(e,t),shortcut:"Meta+Shift+F",context:"any"})})(e,t),((e,t)=>{e.on("init",()=>{e.on("keydown",e=>{e.keyCode!==Je.TAB||e.metaKey||e.ctrlKey||!t.get()||e.preventDefault()})})})(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),(e=>({isFullscreen:()=>null!==e.get()}))(t)})}();