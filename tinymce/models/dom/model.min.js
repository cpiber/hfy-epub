!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=n=e,(r=String).prototype.isPrototypeOf(o)||(null===(s=n.constructor)||void 0===s?void 0:s.name)===r.name)?"string":t;var o,n,r,s})(t)===e,o=e=>t=>typeof t===e,n=e=>t=>e===t,r=t("string"),s=t("object"),l=t("array"),a=n(null),c=o("boolean"),i=n(void 0),m=e=>!(e=>null==e)(e),d=o("function"),u=o("number"),f=()=>{},g=e=>()=>e,h=e=>e,p=(e,t)=>e===t;function b(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const w=e=>t=>!e(t),v=e=>e(),y=g(!1),x=g(!0);class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const S=Array.prototype.slice,T=Array.prototype.indexOf,R=Array.prototype.push,D=(e,t)=>{return o=e,n=t,T.call(o,n)>-1;var o,n},O=(e,t)=>{for(let o=0,n=e.length;o<n;o++)if(t(e[o],o))return!0;return!1},k=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},E=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},N=(e,t)=>{for(let o=0,n=e.length;o<n;o++)t(e[o],o)},B=(e,t)=>{const o=[],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?o:n).push(s)}return{pass:o,fail:n}},_=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},z=(e,t,o)=>(((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(e,(e,n)=>{o=t(o,e,n)}),o),A=(e,t,o)=>(N(e,(e,n)=>{o=t(o,e,n)}),o),W=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return C.some(r);if(o(r,n))break}return C.none()})(e,t,y),L=(e,t)=>{for(let o=0,n=e.length;o<n;o++)if(t(e[o],o))return C.some(o);return C.none()},M=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!l(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);R.apply(t,e[o])}return t},j=(e,t)=>M(E(e,t)),P=(e,t)=>{for(let o=0,n=e.length;o<n;++o)if(!0!==t(e[o],o))return!1;return!0},I=(e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n];o[String(r)]=t(r,n)}return o},F=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none(),H=e=>F(e,0),$=e=>F(e,e.length-1),V=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return C.none()},q=Object.keys,U=Object.hasOwnProperty,G=(e,t)=>{const o=q(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},K=(e,t)=>Y(e,(e,o)=>({k:o,v:t(e,o)})),Y=(e,t)=>{const o={};return G(e,(e,n)=>{const r=t(e,n);o[r.k]=r.v}),o},J=(e,t)=>{const o=[];return G(e,(e,n)=>{o.push(t(e,n))}),o},Q=e=>J(e,h),X=(e,t)=>U.call(e,t),Z=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],o={};return N(e,(n,r)=>{const s=q(n);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],c=n[a];if(void 0!==o[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!l(c))throw new Error("case arguments must be an array");t.push(a),o[a]=(...o)=>{const n=o.length;if(n!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,o)},match:e=>{const n=q(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!P(t,e=>D(n,e)))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:a,params:o})}}}}),o},ee=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},te=e=>e.slice(0).sort(),oe=(e,t)=>{const o=_(t,t=>!D(e,t));o.length>0&&(e=>{throw new Error("Unsupported keys for object: "+te(e).join(", "))})(o)},ne=e=>((e,t)=>((e,t,o)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((e,t)=>{if(!l(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");N(t,t=>{if(!r(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})})("required",t),(e=>{const t=te(e);W(t,(e,o)=>o<t.length-1&&e===t[o+1]).each(e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})})(t),n=>{const r=q(n);P(t,e=>D(r,e))||((e,t)=>{throw new Error("All required keys ("+te(e).join(", ")+") were not specified. Specified keys were: "+te(t).join(", ")+".")})(t,r),e(t,r);const s=_(t,e=>!o.validate(n[e],e));return s.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+te(e).join(", ")+") were not.")})(s,o.label),n}})(e,t,{validate:d,label:"function"}))(oe,e),re=e=>{const t=t=>t(e),o=g(e),n=()=>r,r={tag:!0,inner:e,fold:(t,o)=>o(e),isValue:x,isError:y,map:t=>le.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:o,or:n,getOrThunk:o,orThunk:n,getOrDie:o,each:t=>{t(e)},toOptional:()=>C.some(e)};return r},se=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(t,o)=>t(e),isValue:y,isError:x,map:t,mapError:t=>le.error(t(e)),bind:t,exists:y,forall:x,getOr:h,or:h,getOrThunk:v,orThunk:v,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:f,toOptional:C.none};var n;return o},le={value:re,error:se,fromOption:(e,t)=>e.fold(()=>se(t),re)},ae="undefined"!=typeof window?window:Function("return this;")(),ce=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},ie=(e,t,o=p)=>e.exists(e=>o(e,t)),me=e=>{const t=[],o=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(o);return t},de=(e,t)=>e?C.some(t):C.none(),ue=(e,t)=>((e,t)=>{let o=null!=t?t:ae;for(let t=0;t<e.length&&null!=o;++t)o=o[e[t]];return o})(e.split("."),t),fe=()=>{const e=(e=>{const t=ee(C.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(C.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(C.some(e))}}})(f);return{...e,on:t=>e.get().each(t)}},ge=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,he=(e,t,o=0,n)=>{const r=e.indexOf(t,o);return-1!==r&&(!!i(n)||r+t.length<=n)},pe=(e,t)=>ge(e,t,0),be=(e,t)=>ge(e,t,e.length-t.length),we=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),ve=e=>e.length>0,ye=e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)},xe=["tfoot","thead","tbody","colgroup"],Ce=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Se=(e,t,o)=>({element:e,cells:t,section:o}),Te=(e,t,o)=>({element:e,isNew:t,isLocked:o}),Re=(e,t,o,n)=>({element:e,cells:t,section:o,isNew:n}),De=(e,t,o)=>{const n=e.cells,r=n.slice(0,t),s=n.slice(t),l=r.concat(o).concat(s);return Ee(e,l)},Oe=(e,t,o)=>De(e,t,[o]),ke=(e,t,o)=>{e.cells[t]=o},Ee=(e,t)=>Re(e.element,t,e.section,e.isNew),Ne=(e,t)=>e.cells[t],Be=(e,t)=>Ne(e,t).element,_e=e=>e.cells.length,ze=e=>{const t=B(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},Ae=(e,t,o)=>{const n=E(e.cells,o);return Re(t(e.element),n,e.section,!0)},We=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Le={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return We(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return We(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return We(o)},fromDom:We,fromPoint:(e,t,o)=>C.from(e.dom.elementFromPoint(t,o)).map(We)},Me=(e,t)=>{const o=e.document.createRange();return o.selectNode(t.dom),o},je=(e,t)=>{const o=e.document.createRange();return Pe(o,t),o},Pe=(e,t)=>e.selectNodeContents(t.dom),Ie=(e,t,o)=>{const n=e.document.createRange();var r;return r=n,t.fold(e=>{r.setStartBefore(e.dom)},(e,t)=>{r.setStart(e.dom,t)},e=>{r.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,o)=>{e.setEnd(t.dom,o)},t=>{e.setEndAfter(t.dom)})})(n,o),n},Fe=(e,t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},He=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),$e=Z([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ve=(e,t,o)=>t(Le.fromDom(o.startContainer),o.startOffset,Le.fromDom(o.endContainer),o.endOffset),qe=(e,t)=>{const o=((e,t)=>t.match({domRange:e=>({ltr:g(e),rtl:C.none}),relative:(t,o)=>({ltr:ye(()=>Ie(e,t,o)),rtl:ye(()=>C.some(Ie(e,o,t)))}),exact:(t,o,n,r)=>({ltr:ye(()=>Fe(e,t,o,n,r)),rtl:ye(()=>C.some(Fe(e,n,r,t,o)))})}))(e,t);return((e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>$e.rtl(Le.fromDom(e.endContainer),e.endOffset,Le.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>Ve(0,$e.ltr,o)):Ve(0,$e.ltr,o)})(0,o)},Ue=(e,t)=>qe(e,t).match({ltr:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},rtl:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(n.dom,r),s.setEnd(t.dom,o),s}});$e.ltr,$e.rtl;const Ge=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ke=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Ye=(e,t)=>{const o=void 0===t?document:t.dom;return Ke(o)?C.none():C.from(o.querySelector(e)).map(Le.fromDom)},Je=(e,t)=>e.dom===t.dom,Qe=(e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)},Xe=Ge,Ze=()=>et(0,0),et=(e,t)=>({major:e,minor:t}),tt={nu:et,detect:(e,t)=>{const o=String(t).toLowerCase();return 0===e.length?Ze():((e,t)=>{const o=((e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if(n.test(t))return n}})(e,t);if(!o)return{major:0,minor:0};const n=e=>Number(t.replace(o,"$"+e));return et(n(1),n(2))})(e,o)},unknown:Ze},ot=(e,t)=>{const o=String(t).toLowerCase();return W(e,e=>e.search(o))},nt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rt=e=>t=>he(t,e),st=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>he(e,"edge/")&&he(e,"chrome")&&he(e,"safari")&&he(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nt],search:e=>he(e,"chrome")&&!he(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>he(e,"msie")||he(e,"trident")},{name:"Opera",versionRegexes:[nt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rt("firefox")},{name:"Safari",versionRegexes:[nt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(he(e,"safari")||he(e,"mobile/"))&&he(e,"applewebkit")}],lt=[{name:"Windows",search:rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>he(e,"iphone")||he(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rt("linux"),versionRegexes:[]},{name:"Solaris",search:rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],at={browsers:g(st),oses:g(lt)},ct="Edge",it="Chromium",mt="Opera",dt="Firefox",ut="Safari",ft=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isEdge:n(ct),isChromium:n(it),isIE:n("IE"),isOpera:n(mt),isFirefox:n(dt),isSafari:n(ut)}},gt=()=>ft({current:void 0,version:tt.unknown()}),ht=ft,pt=(g(ct),g(it),g("IE"),g(mt),g(dt),g(ut),"Windows"),bt="Android",wt="Linux",vt="macOS",yt="Solaris",xt="FreeBSD",Ct="ChromeOS",St=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isWindows:n(pt),isiOS:n("iOS"),isAndroid:n(bt),isMacOS:n(vt),isLinux:n(wt),isSolaris:n(yt),isFreeBSD:n(xt),isChromeOS:n(Ct)}},Tt=()=>St({current:void 0,version:tt.unknown()}),Rt=St,Dt=(g(pt),g("iOS"),g(bt),g(wt),g(vt),g(yt),g(xt),g(Ct),e=>window.matchMedia(e).matches);let Ot=ye(()=>((e,t,o)=>{const n=at.browsers(),r=at.oses(),s=t.bind(e=>((e,t)=>V(t.brands,t=>{const o=t.brand.toLowerCase();return W(e,e=>{var t;return o===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:tt.nu(parseInt(t.version,10),0)}))}))(n,e)).orThunk(()=>((e,t)=>ot(e,t).map(e=>{const o=tt.detect(e.versionRegexes,t);return{current:e.name,version:o}}))(n,e)).fold(gt,ht),l=((e,t)=>ot(e,t).map(e=>{const o=tt.detect(e.versionRegexes,t);return{current:e.name,version:o}}))(r,e).fold(Tt,Rt),a=((e,t,o,n)=>{const r=e.isiOS()&&!0===/ipad/i.test(o),s=e.isiOS()&&!r,l=e.isiOS()||e.isAndroid(),a=l||n("(pointer:coarse)"),c=r||!s&&l&&n("(min-device-width:768px)"),i=s||l&&!c,m=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),d=!i&&!c&&!m;return{isiPad:g(r),isiPhone:g(s),isTablet:g(c),isPhone:g(i),isTouch:g(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:g(m),isDesktop:g(d)}})(l,s,e,o);return{browser:s,os:l,deviceType:a}})(window.navigator.userAgent,C.from(window.navigator.userAgentData),Dt));const kt=()=>Ot(),Et=Object.getPrototypeOf,Nt=e=>e.dom.nodeName.toLowerCase(),Bt=e=>e.dom.nodeType,_t=e=>t=>Bt(t)===e,zt=e=>8===Bt(e)||"#comment"===Nt(e),At=e=>Wt(e)&&(e=>{const t=ue("ownerDocument.defaultView",e);return s(e)&&((e=>((e,t)=>{const o=((e,t)=>ue(e,t))(e,t);if(null==o)throw new Error(e+" not available on this browser");return o})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Et(e).constructor.name))})(e.dom),Wt=_t(1),Lt=_t(3),Mt=_t(9),jt=_t(11),Pt=e=>t=>Wt(t)&&Nt(t)===e,It=e=>Le.fromDom(e.dom.ownerDocument),Ft=e=>Mt(e)?e:It(e),Ht=e=>C.from(e.dom.parentNode).map(Le.fromDom),$t=e=>C.from(e.dom.parentElement).map(Le.fromDom),Vt=(e,t)=>{const o=d(t)?t:y;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=Le.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r},qt=e=>C.from(e.dom.previousSibling).map(Le.fromDom),Ut=e=>C.from(e.dom.nextSibling).map(Le.fromDom),Gt=e=>E(e.dom.childNodes,Le.fromDom),Kt=(e,t)=>{const o=e.dom.childNodes;return C.from(o[t]).map(Le.fromDom)},Yt=e=>jt(e)&&m(e.dom.host),Jt=e=>Le.fromDom(e.dom.getRootNode()),Qt=e=>Le.fromDom(e.dom.host),Xt=e=>{const t=Le.fromDom((e=>{if(m(e.target)){const t=Le.fromDom(e.target);if(Wt(t)&&m(t.dom.shadowRoot)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return H(t)}}return C.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=(s=n,l=o,(...e)=>s(l.apply(null,e)));var s,l;return((e,t,o,n,r,s,l)=>({target:e,x:t,y:o,stop:n,prevent:r,kill:s,raw:l}))(t,e.clientX,e.clientY,o,n,r,e)},Zt=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},eo=x,to=(e,t,o)=>((e,t,o,n)=>((e,t,o,n,r)=>{const s=((e,t)=>o=>{e(o)&&t(Xt(o))})(o,n);return e.dom.addEventListener(t,s,r),{unbind:b(Zt,e,t,s,r)}})(e,t,o,n,!1))(e,t,eo,o),oo=Xt,no=(e,t)=>{Ht(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},ro=(e,t)=>{Ut(e).fold(()=>{Ht(e).each(e=>{lo(e,t)})},e=>{no(e,t)})},so=(e,t)=>{const o=(e=>Kt(e,0))(e);o.fold(()=>{lo(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},lo=(e,t)=>{e.dom.appendChild(t.dom)},ao=(e,t)=>{no(e,t),lo(t,e)},co=(e,t)=>{N(t,(o,n)=>{const r=0===n?e:t[n-1];ro(r,o)})},io=(e,t)=>{N(t,t=>{lo(e,t)})},mo=(e,t,o)=>{if(!(r(o)||c(o)||u(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},uo=(e,t,o)=>{mo(e.dom,t,o)},fo=(e,t)=>{const o=e.dom;G(t,(e,t)=>{mo(o,t,e)})},go=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},ho=(e,t)=>C.from(go(e,t)),po=(e,t)=>{e.dom.removeAttribute(t)},bo=e=>A(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),wo=e=>{e.dom.textContent="",N(Gt(e),e=>{vo(e)})},vo=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},yo=e=>{const t=Gt(e);t.length>0&&co(e,t),vo(e)},xo=(e,t)=>Le.fromDom(e.dom.cloneNode(t)),Co=e=>xo(e,!1),So=e=>xo(e,!0),To=(e,t)=>{const o=Le.fromTag(t),n=bo(e);return fo(o,n),o},Ro=e=>void 0!==e.style&&d(e.style.getPropertyValue),Do=e=>{const t=Lt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return(e=>{const t=Jt(e);return Yt(t)?C.some(t):C.none()})(Le.fromDom(t)).fold(()=>o.body.contains(t),(n=Do,r=Qt,e=>n(r(e))));var n,r},Oo=(e,t,o)=>{if(!r(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ro(e)&&e.style.setProperty(t,o)},ko=(e,t,o)=>{const n=e.dom;Oo(n,t,o)},Eo=(e,t)=>{const o=e.dom;G(t,(e,t)=>{Oo(o,t,e)})},No=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||Do(e)?n:Bo(o,t)},Bo=(e,t)=>Ro(e)?e.style.getPropertyValue(t):"",_o=(e,t)=>{const o=e.dom,n=Bo(o,t);return C.from(n).filter(e=>e.length>0)},zo=(e,t)=>{((e,t)=>{Ro(e)&&e.style.removeProperty(t)})(e.dom,t),ie(ho(e,"style").map(we),"")&&po(e,"style")},Ao=(e,t)=>{const o=o=>{const n=t(o);if(n<=0||null===n){const t=No(o,e);return parseFloat(t)||0}return n},n=(e,t)=>A(t,(t,o)=>{const n=No(e,o),r=void 0===n?0:parseInt(n,10);return isNaN(r)?t:t+r},0);return{set:(t,o)=>{if(!u(o)&&!o.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+o);const n=t.dom;Ro(n)&&(n.style[e]=o+"px")},get:o,getOuter:o,aggregate:n,max:(e,t,o)=>{const r=n(e,o);return t>r?t-r:0}}},Wo=(e,t,o)=>((e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?C.none():C.some(t)})(e).getOr(t))(No(e,t),o),Lo=Ao("height",e=>{const t=e.dom;return Do(e)?t.getBoundingClientRect().height:t.offsetHeight}),Mo=e=>Lo.get(e),jo=e=>Lo.getOuter(e),Po=Ao("width",e=>e.dom.offsetWidth);Ao("width",e=>{const t=e.dom;return Do(e)?t.getBoundingClientRect().width:t.offsetWidth});const Io=e=>Po.get(e),Fo=e=>Po.getOuter(e),Ho=e=>(e=>{const t=e.dom;return((e,t,o,n)=>t-Wo(e,`padding-${o}`,0)-Wo(e,`padding-${n}`,0)-Wo(e,`border-${o}-width`,0)-Wo(e,`border-${n}-width`,0))(e,t.getBoundingClientRect().width||t.offsetWidth,"left","right")})(e),$o=(e,t)=>({left:e,top:t,translate:(o,n)=>$o(e+o,t+n)}),Vo=$o,qo=(e,t)=>void 0!==e?e:void 0!==t?t:0,Uo=e=>{const t=e.dom.ownerDocument,o=t.body,n=t.defaultView,r=t.documentElement;if(o===e.dom)return Vo(o.offsetLeft,o.offsetTop);const s=qo(null==n?void 0:n.pageYOffset,r.scrollTop),l=qo(null==n?void 0:n.pageXOffset,r.scrollLeft),a=qo(r.clientTop,o.clientTop),c=qo(r.clientLeft,o.clientLeft);return Go(e).translate(l-c,s-a)},Go=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?Vo(o.offsetLeft,o.offsetTop):Do(e)?(e=>{const t=e.getBoundingClientRect();return Vo(t.left,t.top)})(t):Vo(0,0)},Ko=(e=>{const t=t=>e(t)?C.from(t.dom.nodeValue):C.none();return{get:o=>{if(!e(o))throw new Error("Can only get text value of a text node");return t(o).getOr("")},getOption:t,set:(t,o)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=o}}})(Lt),Yo=e=>Ko.get(e),Jo=e=>Ko.getOption(e),Qo=(e,t)=>Ko.set(e,t),Xo=(e,t)=>o=>"rtl"===Zo(o)?t:e,Zo=e=>"rtl"===No(e,"direction")?"rtl":"ltr";var en=(e,t,o,n,r)=>e(o,n)?C.some(o):d(r)&&r(o)?C.none():t(o,n,r);const tn=(e,t,o)=>{let n=e.dom;const r=d(o)?o:y;for(;n.parentNode;){n=n.parentNode;const e=Le.fromDom(n);if(t(e))return C.some(e);if(r(e))break}return C.none()},on=(e,t,o)=>en((e,t)=>t(e),tn,e,t,o),nn=(e,t,o)=>tn(e,e=>Ge(e,t),o),rn=(e,t)=>(e=>W(e.dom.childNodes,e=>{return o=Le.fromDom(e),Ge(o,t);var o}).map(Le.fromDom))(e),sn=(e,t)=>Ye(t,e),ln=(e,t,o)=>en((e,t)=>Ge(e,t),nn,e,t,o),an=e=>void 0!==e.dom.classList,cn=(e,t)=>{an(e)?e.dom.classList.add(t):((e,t)=>{((e,t,o)=>{const n=((e,t)=>{const o=go(e,t);return void 0===o||""===o?[]:o.split(" ")})(e,t).concat([o]);uo(e,t,n.join(" "))})(e,"class",t)})(e,t)},mn=(e,t)=>an(e)&&e.dom.classList.contains(t),dn=e=>ln(e,"[contenteditable]"),un=(e,t=!1)=>Do(e)?e.dom.isContentEditable:dn(e).fold(g(t),e=>"true"===fn(e)),fn=e=>e.dom.contentEditable,gn=(e,t)=>{let o=[];return N(Gt(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(gn(e,t))}),o},hn=(e,t,o)=>((e,o,n)=>_(Vt(e,n),e=>Ge(e,t)))(e,0,o),pn=(e,t)=>(e=>_(Gt(e),e=>Ge(e,t)))(e),bn=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return Ke(o)?[]:E(o.querySelectorAll(e),Le.fromDom)})(t,e),wn=e=>"img"===Nt(e)?1:Jo(e).fold(()=>Gt(e).length,e=>e.length),vn=["img","br"],yn=e=>Jo(e).filter(e=>0!==e.trim().length||e.indexOf("Â ")>-1).isSome()||D(vn,Nt(e))||(e=>At(e)&&"false"===go(e,"contenteditable"))(e),xn=e=>((e,t)=>{const o=e=>{for(let n=0;n<e.childNodes.length;n++){const r=Le.fromDom(e.childNodes[n]);if(t(r))return C.some(r);const s=o(e.childNodes[n]);if(s.isSome())return s}return C.none()};return o(e.dom)})(e,yn),Cn=e=>Sn(e,yn),Sn=(e,t)=>{const o=e=>{const n=Gt(e);for(let e=n.length-1;e>=0;e--){const r=n[e];if(t(r))return C.some(r);const s=o(r);if(s.isSome())return s}return C.none()};return o(e)},Tn=(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n}),Rn=Z([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Dn={before:Rn.before,on:Rn.on,after:Rn.after,cata:(e,t,o,n)=>e.fold(t,o,n),getStart:e=>e.fold(h,h,h)},On=Z([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),kn={domRange:On.domRange,relative:On.relative,exact:On.exact,exactFromRange:e=>On.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Le.fromDom(e.startContainer),relative:(e,t)=>Dn.getStart(e),exact:(e,t,o,n)=>e}))(e);return Le.fromDom(Ft(t).dom.defaultView)},range:Tn},En=(e,t)=>{const o=Nt(e);return"input"===o?Dn.after(e):D(["br","img"],o)?0===t?Dn.before(e):Dn.after(e):Dn.on(e,t)},Nn=e=>C.from(e.getSelection()),Bn=(e,t)=>{Nn(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},_n=(e,t,o,n,r)=>{const s=Fe(e,t,o,n,r);Bn(e,s)},zn=(e,t)=>qe(e,t).match({ltr:(t,o,n,r)=>{_n(e,t,o,n,r)},rtl:(t,o,n,r)=>{Nn(e).each(s=>{if(s.setBaseAndExtent)s.setBaseAndExtent(t.dom,o,n.dom,r);else if(s.extend)try{((e,t,o,n,r,s)=>{t.collapse(o.dom,n),t.extend(r.dom,s)})(0,s,t,o,n,r)}catch(s){_n(e,n,r,t,o)}else _n(e,n,r,t,o)})}}),An=(e,t,o,n,r)=>{const s=((e,t,o,n)=>{const r=En(e,t),s=En(o,n);return kn.relative(r,s)})(t,o,n,r);zn(e,s)},Wn=(e,t,o)=>{const n=((e,t)=>{const o=e.fold(Dn.before,En,Dn.after),n=t.fold(Dn.before,En,Dn.after);return kn.relative(o,n)})(t,o);zn(e,n)},Ln=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),o=e.getRangeAt(e.rangeCount-1);return C.some(Tn(Le.fromDom(t.startContainer),t.startOffset,Le.fromDom(o.endContainer),o.endOffset))}return C.none()},Mn=e=>{if(null===e.anchorNode||null===e.focusNode)return Ln(e);{const t=Le.fromDom(e.anchorNode),o=Le.fromDom(e.focusNode);return((e,t,o,n)=>{const r=((e,t,o,n)=>{const r=It(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(o.dom,n),r})(e,t,o,n),s=Je(e,o)&&t===n;return r.collapsed&&!s})(t,e.anchorOffset,o,e.focusOffset)?C.some(Tn(t,e.anchorOffset,o,e.focusOffset)):Ln(e)}},jn=(e,t,o=!0)=>{const n=(o?je:Me)(e,t);Bn(e,n)},Pn=e=>(e=>Nn(e).filter(e=>e.rangeCount>0).bind(Mn))(e).map(e=>kn.exact(e.start,e.soffset,e.finish,e.foffset)),In={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Fn=(()=>{const e="[0-9]+",t="[eE][+-]?"+e,o=e=>`(?:${e})?`,n=["Infinity",e+"\\."+o(e)+o(t),"\\."+e+o(t),e+o(t)].join("|");return new RegExp(`^([+-]?(?:${n}))(.*)$`)})(),Hn=e=>E(e,g(0)),$n=(e,t,o,n,r)=>r(e.slice(0,t)).concat(n).concat(r(e.slice(o))),Vn=e=>(t,o,n,r)=>{if(e(n)){const e=Math.max(r,t[o]-Math.abs(n)),s=Math.abs(e-t[o]);return n>=0?s:-s}return n},qn=Vn(e=>e<0),Un=Vn(x),Gn=()=>{const e=(e,t,o,n)=>{const r=(100+o)/100,s=Math.max(n,(e[t]+o)/r);return E(e,(e,o)=>(o===t?s:e/r)-e)},t=(t,o,n,r,s,l)=>l?e(t,o,r,s):((e,t,o,n,r)=>{const s=qn(e,t,n,r);return $n(e,t,o+1,[s,0],Hn)})(t,o,n,r,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:qn,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,o,n,r,s,l,a)=>t(e,n,r,s,l,a),calcRightEdgeDeltas:(t,o,n,r,s,l)=>{if(l)return e(t,n,r,s);{const e=qn(t,n,r,s);return Hn(t.slice(0,n)).concat([e])}},calcRedestributedWidths:(e,t,o,n)=>{if(n){const n=(t+o)/t,r=E(e,e=>e/n);return{delta:100*n-100,newSizes:r}}return{delta:o,newSizes:e}}}},Kn=()=>{const e=(e,t,o,n,r)=>{const s=Un(e,n>=0?o:t,n,r);return $n(e,t,o+1,[s,-s],Hn)};return{resizeTable:(e,t,o)=>{o&&e(t)},clampTableDelta:(e,t,o,n,r)=>{if(r){if(o>=0)return o;{const t=A(e,(e,t)=>e+t-n,0);return Math.max(-t,o)}}return qn(e,t,o,n)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,o,n,r,s,l)=>e(t,n,r,s,l),calcRightEdgeDeltas:(e,t,o,n,r,s)=>{if(s)return Hn(e);{const t=n/e.length;return E(e,g(t))}},calcRedestributedWidths:(e,t,o,n)=>({delta:0,newSizes:e})}},Yn=(e,t,o=0)=>ho(e,t).map(e=>parseInt(e,10)).getOr(o),Jn=(e,t)=>Yn(e,t,1),Qn=e=>Pt("col")(e)?Yn(e,"span",1)>1:Jn(e,"colspan")>1,Xn=(e,t)=>parseInt(No(e,t),10),Zn=g(10),er=g(10),tr=(e,t)=>or(e,t,x),or=(e,t,o)=>j(Gt(e),e=>Ge(e,t)?o(e)?[e]:[]:or(e,t,o)),nr=(e,t)=>((e,t,o=y)=>o(t)?C.none():D(e,Nt(t))?C.some(t):nn(t,e.join(","),e=>Ge(e,"table")||o(e)))(["td","th"],e,t),rr=e=>tr(e,"th,td"),sr=e=>Ge(e,"colgroup")?pn(e,"col"):j(cr(e),e=>pn(e,"col")),lr=(e,t)=>ln(e,"table",t),ar=e=>tr(e,"tr"),cr=e=>lr(e).fold(g([]),e=>pn(e,"colgroup")),ir=Pt("th"),mr=e=>P(e,e=>ir(e.element)),dr=(e,t)=>e&&t?"sectionCells":e?"section":"cells",ur=e=>{const t="thead"===e.section,o=ie(fr(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:dr(t,o)}:{type:"body"}},fr=e=>{const t=_(e,e=>ir(e.element));return 0===t.length?C.some("td"):t.length===e.length?C.some("th"):C.none()},gr=(e,t)=>E(e,e=>{if("colgroup"===Nt(e)){const t=E(sr(e),e=>{const t=Yn(e,"span",1);return Ce(e,1,t)});return Se(e,t,"colgroup")}{const o=E(rr(e),e=>{const t=Yn(e,"rowspan",1),o=Yn(e,"colspan",1);return Ce(e,t,o)});return Se(e,o,t(e))}}),hr=e=>Ht(e).map(e=>{const t=Nt(e);return(e=>D(xe,e))(t)?t:"tbody"}).getOr("tbody"),pr=e=>{const t=ar(e),o=[...cr(e),...t];return gr(o,hr)},br="data-snooker-locked-cols",wr=e=>ho(e,br).bind(e=>C.from(e.match(/\d+/g))).map(e=>I(e,x)),vr=e=>{const t=A(ze(e).rows,(e,t)=>(N(t.cells,(t,o)=>{t.isLocked&&(e[o]=!0)}),e),{}),o=J(t,(e,t)=>parseInt(t,10));return(e=>{const t=S.call(e,0);return t.sort(void 0),t})(o)},yr=(e,t)=>e+","+t,xr=(e,t)=>{const o=j(e.all,e=>e.cells);return _(o,t)},Cr=e=>{const t={},o=[],n=H(e).map(e=>e.element).bind(lr).bind(wr).getOr({});let r=0,s=0,l=0;const{pass:a,fail:c}=B(e,e=>"colgroup"===e.section);N(c,e=>{const a=[];N(e.cells,e=>{let o=0;for(;void 0!==t[yr(l,o)];)o++;const r=((e,t)=>X(e,t)&&void 0!==e[t]&&null!==e[t])(n,o.toString()),c=((e,t,o,n,r,s)=>({element:e,rowspan:t,colspan:o,row:n,column:r,isLocked:s}))(e.element,e.rowspan,e.colspan,l,o,r);for(let n=0;n<e.colspan;n++)for(let r=0;r<e.rowspan;r++){const e=o+n,a=yr(l+r,e);t[a]=c,s=Math.max(s,e+1)}a.push(c)}),r++,o.push(Se(e.element,a,e.section)),l++});const{columns:i,colgroups:m}=$(a).map(e=>{const t=(e=>{const t={};let o=0;return N(e.cells,e=>{const n=e.colspan;k(n,r=>{const s=o+r;t[s]=((e,t,o)=>({element:e,colspan:t,column:o}))(e.element,n,s)}),o+=n}),t})(e),o=((e,t)=>({element:e,columns:t}))(e.element,Q(t));return{colgroups:[o],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),d=((e,t)=>({rows:e,columns:t}))(r,s);return{grid:d,access:t,all:o,columns:i,colgroups:m}},Sr=e=>{const t=pr(e);return Cr(t)},Tr=Cr,Rr=(e,t,o)=>C.from(e.access[yr(t,o)]),Dr=(e,t,o)=>{const n=xr(e,e=>o(t,e.element));return n.length>0?C.some(n[0]):C.none()},Or=xr,kr=e=>j(e.all,e=>e.cells),Er=e=>Q(e.columns),Nr=e=>q(e.columns).length>0,Br=(e,t)=>C.from(e.columns[t]),_r=(e,t,o)=>Te(o(e.element,t),!0,e.isLocked),zr=(e,t)=>e.section!==t?Re(e.element,e.cells,t,e.isNew):e,Ar=()=>({transformRow:zr,transformCell:(e,t,o)=>{const n=o(e.element,t),r="td"!==Nt(n)?(e=>{const t=To(e,"td");ro(e,t);const o=Gt(e);return io(t,o),vo(e),t})(n):n;return Te(r,e.isNew,e.isLocked)}}),Wr=()=>({transformRow:zr,transformCell:_r}),Lr=()=>({transformRow:(e,t)=>zr(e,"thead"===t?"tbody":t),transformCell:_r}),Mr=Ar,jr=Wr,Pr=Lr,Ir=()=>({transformRow:h,transformCell:_r}),Fr=(e,t=x)=>{const o=e.grid,n=k(o.columns,h),r=k(o.rows,h);return E(n,o=>Hr(()=>j(r,t=>Rr(e,t,o).filter(e=>e.column===o).toArray()),e=>1===e.colspan&&t(e.element),()=>Rr(e,0,o)))},Hr=(e,t,o)=>{const n=e();return W(n,t).orThunk(()=>C.from(n[0]).orThunk(o)).map(e=>e.element)},$r=e=>{const t=e.grid,o=k(t.rows,h),n=k(t.columns,h);return E(o,t=>Hr(()=>j(n,o=>Rr(e,t,o).filter(e=>e.row===t).fold(g([]),e=>[e])),e=>1===e.rowspan,()=>Rr(e,t,0)))},Vr=(e,t)=>({row:e,y:t}),qr=(e,t)=>({col:e,x:t}),Ur=e=>Uo(e).left+Fo(e),Gr=e=>Uo(e).left,Kr=(e,t)=>qr(e,Gr(t)),Yr=(e,t)=>qr(e,Ur(t)),Jr=e=>Uo(e).top,Qr=(e,t)=>Vr(e,Jr(t)),Xr=(e,t)=>Vr(e,Jr(t)+jo(t)),Zr=(e,t,o)=>{if(0===o.length)return[];const n=E(o.slice(1),(t,o)=>t.map(t=>e(o,t))),r=o[o.length-1].map(e=>t(o.length-1,e));return n.concat([r])},es={delta:h,positions:e=>Zr(Qr,Xr,e),edge:Jr},ts=Xo({delta:h,edge:Gr,positions:e=>Zr(Kr,Yr,e)},{delta:e=>-e,edge:Ur,positions:e=>Zr(Yr,Kr,e)}),os={delta:(e,t)=>ts(t).delta(e,t),positions:(e,t)=>ts(t).positions(e,t),edge:e=>ts(e).edge(e)},ns=/(\d+(\.\d+)?)%/,rs=/(\d+(\.\d+)?)px|em/,ss=Pt("col"),ls=Pt("tr"),as=(e,t,o)=>{const n=$t(e).getOrThunk(()=>(e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Le.fromDom(t)})(It(e)));return t(e)/o(n)*100},cs=(e,t)=>{ko(e,"width",t+"px")},is=(e,t)=>{ko(e,"width",t+"%")},ms=(e,t)=>{ko(e,"height",t+"px")},ds=e=>{const t=(e=>{return Wo(t=e,"height",t.dom.offsetHeight)+"px";var t})(e);return t?((e,t,o,n)=>{const r=parseFloat(e);return be(e,"%")&&"table"!==Nt(t)?((e,t,o,n)=>{const r=lr(e).map(e=>{const n=o(e);return Math.floor(t/100*n)}).getOr(t);return n(e,r),r})(t,r,o,n):r})(t,e,Mo,ms):Mo(e)},us=(e,t)=>_o(e,t).orThunk(()=>ho(e,t).map(e=>e+"px")),fs=e=>us(e,"width"),gs=e=>as(e,Io,Ho),hs=e=>{return ss(e)?Io(e):Wo(t=e,"width",t.dom.offsetWidth);var t},ps=e=>ls(e)?Mo(e):((e,t,o)=>o(e)/Jn(e,"rowspan"))(e,0,ds),bs=(e,t,o)=>{ko(e,"width",t+o)},ws=e=>as(e,Io,Ho)+"%",vs=g(ns),ys=Pt("col"),xs=e=>fs(e).getOrThunk(()=>hs(e)+"px"),Cs=e=>{return(t=e,us(t,"height")).getOrThunk(()=>ps(e)+"px");var t},Ss=(e,t,o,n,r,s)=>e.filter(n).fold(()=>s(((e,t)=>{if(t<0||t>=e.length-1)return C.none();const o=e[t].fold(()=>{const o=(e=>{const t=S.call(e,0);return t.reverse(),t})(e.slice(0,t));return V(o,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>C.some({value:e,delta:0})),n=e[t+1].fold(()=>{const o=e.slice(t+1);return V(o,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>C.some({value:e,delta:1}));return o.bind(e=>n.map(t=>{const o=t.delta+e.delta;return Math.abs(t.value-e.value)/o}))})(o,t)),e=>r(e)),Ts=(e,t,o,n)=>{const r=Fr(e),s=Nr(e)?(e=>E(Er(e),e=>C.from(e.element)))(e):r,l=[C.some(os.edge(t))].concat(E(os.positions(r,t),e=>e.map(e=>e.x))),a=w(Qn);return E(s,(e,t)=>Ss(e,t,l,a,e=>{if((e=>{const t=kt().browser,o=t.isChromium()||t.isFirefox();return!ys(e)||o})(e))return o(e);{const e=null!=(s=r[t])?s:C.none();return Ss(e,t,l,a,e=>n(C.some(Io(e))),n)}var s},n))},Rs=e=>e.map(e=>e+"px").getOr(""),Ds=(e,t,o)=>Ts(e,t,hs,e=>e.getOrThunk(o.minCellWidth)),Os=(e,t,o,n)=>{const r=$r(e),s=E(e.all,e=>C.some(e.element)),l=[C.some(es.edge(t))].concat(E(es.positions(r,t),e=>e.map(e=>e.y)));return E(s,(e,t)=>Ss(e,t,l,x,o,n))},ks=(e,t)=>()=>Do(e)?t(e):parseFloat(_o(e,"width").getOr("0")),Es=e=>{const t=ks(e,e=>parseFloat(ws(e))),o=ks(e,Io);return{width:t,pixelWidth:o,getWidths:(t,o)=>((e,t,o)=>Ts(e,t,gs,e=>e.fold(()=>o.minCellWidth(),e=>e/o.pixelWidth()*100)))(t,e,o),getCellDelta:e=>e/o()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Zn()/o()*100,setElementWidth:is,adjustTableWidth:o=>{const n=t();is(e,n+o/100*n)},isRelative:!0,label:"percent"}},Ns=e=>{const t=ks(e,Io);return{width:t,pixelWidth:t,getWidths:(t,o)=>Ds(t,e,o),getCellDelta:h,singleColumnWidth:(e,t)=>[Math.max(Zn(),e+t)-e],minCellWidth:Zn,setElementWidth:cs,adjustTableWidth:o=>{const n=t()+o;cs(e,n)},isRelative:!1,label:"pixel"}},Bs=e=>fs(e).fold(()=>(e=>{const t=ks(e,Io),o=g(0);return{width:t,pixelWidth:t,getWidths:(t,o)=>Ds(t,e,o),getCellDelta:o,singleColumnWidth:g([0]),minCellWidth:o,setElementWidth:f,adjustTableWidth:f,isRelative:!0,label:"none"}})(e),t=>((e,t)=>null!==vs().exec(t)?Es(e):Ns(e))(e,t)),_s=Ns,zs=Es,As=(e,t,o,n)=>{o===n?po(e,t):uo(e,t,o)},Ws=(e,t,o)=>{$(pn(e,t)).fold(()=>so(e,o),e=>ro(e,o))},Ls=(e,t)=>{const o=[],n=[],r=e=>E(e,e=>{e.isNew&&o.push(e.element);const t=e.element;return wo(t),N(e.cells,e=>{e.isNew&&n.push(e.element),As(e.element,"colspan",e.colspan,1),As(e.element,"rowspan",e.rowspan,1),lo(t,e.element)}),t}),s=e=>j(e,e=>E(e.cells,e=>(As(e.element,"span",e.colspan,1),e.element))),l=(t,o)=>{const n=((e,t)=>{const o=rn(e,t).getOrThunk(()=>{const o=Le.fromTag(t,It(e).dom);return"thead"===t?Ws(e,"caption,colgroup",o):"colgroup"===t?Ws(e,"caption",o):lo(e,o),o});return wo(o),o})(e,o),l=("colgroup"===o?s:r)(t);io(n,l)},a=(t,o)=>{t.length>0?l(t,o):(t=>{rn(e,t).each(vo)})(o)},c=[],i=[],m=[],d=[];return N(t,e=>{switch(e.section){case"thead":c.push(e);break;case"tbody":i.push(e);break;case"tfoot":m.push(e);break;case"colgroup":d.push(e)}}),a(d,"colgroup"),a(c,"thead"),a(i,"tbody"),a(m,"tfoot"),{newRows:o,newCells:n}},Ms=(e,t)=>{if(0===e.length)return 0;const o=e[0];return L(e,e=>!t(o.element,e.element)).getOr(e.length)},js=(e,t,o)=>{const n=[];N(e.colgroups,r=>{const s=[];for(let n=0;n<e.grid.columns;n++){const r=Br(e,n).map(e=>Te(e.element,o,!1)).getOrThunk(()=>Te(t.colGap(),!0,!1));s.push(r)}n.push(Re(r.element,s,"colgroup",o))});for(let r=0;r<e.grid.rows;r++){const s=[];for(let n=0;n<e.grid.columns;n++){const l=Rr(e,r,n).map(e=>Te(e.element,o,e.isLocked)).getOrThunk(()=>Te(t.gap(),!0,!1));s.push(l)}const l=e.all[r],a=Re(l.element,s,l.section,o);n.push(a)}return n},Ps=e=>((e,t)=>{const o=E(e,e=>E(e.cells,y));return E(e,(n,r)=>{const s=j(n.cells,(n,s)=>{if(!1===o[r][s]){const m=((e,t,o,n)=>{const r=((e,t)=>e[t])(e,t),s="colgroup"===r.section,l=Ms(r.cells.slice(o),n),a=s?1:Ms(((e,t)=>E(e,e=>Ne(e,t)))(e.slice(t),o),n);return{colspan:l,rowspan:a}})(e,r,s,t);return((e,t,n,r)=>{for(let s=e;s<e+n;s++)for(let e=t;e<t+r;e++)o[s][e]=!0})(r,s,m.rowspan,m.colspan),[(l=n.element,a=m.rowspan,c=m.colspan,i=n.isNew,{element:l,rowspan:a,colspan:c,isNew:i})]}return[];var l,a,c,i});return((e,t,o,n)=>({element:e,cells:t,section:o,isNew:n}))(n.element,s,n.section,n.isNew)})})(e,Je),Is=(e,t)=>V(e.all,e=>W(e.cells,e=>Je(t,e.element))),Fs=(e,t,o)=>{const n=E(t.selection,t=>nr(t).bind(t=>Is(e,t)).filter(o)),r=me(n);return de(r.length>0,r)},Hs=(e,t,o,n,r,s,l,a,c)=>{const i=Sr(s),m=C.from(null==c?void 0:c.section).getOrThunk(Ir);return t(i,l).map(t=>{const o=((e,t)=>js(e,t,!1))(i,a),n=e(o,t,Je,r(a),m),s=vr(n.grid);return{info:t,grid:Ps(n.grid),cursor:n.cursor,lockedColumns:s}}).bind(e=>{const t=Ls(s,e.grid),r=C.from(null==c?void 0:c.sizing).getOrThunk(()=>Bs(s)),l=C.from(null==c?void 0:c.resize).getOrThunk(Kn);return o(s,e.grid,e.info,{sizing:r,resize:l,section:m}),n(s),po(s,br),e.lockedColumns.length>0&&uo(s,br,e.lockedColumns.join(",")),C.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},$s=(e,t)=>nr(t.element).bind(o=>Is(e,o).map(e=>({...e,generators:t.generators,clipboard:t.clipboard}))),Vs=(e,t)=>Fs(e,t,x).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),qs=(e,t)=>Fs(e,t,x),Us=(e,t)=>Fs(e,t,e=>!e.isLocked),Gs=(e,t)=>P(t,t=>((e,t)=>Is(e,t).exists(e=>!e.isLocked))(e,t)),Ks=(e,t)=>((e,t)=>t.mergable)(0,t).filter(t=>Gs(e,t.cells)),Ys=(e,t)=>((e,t)=>t.unmergable)(0,t).filter(t=>Gs(e,t)),Js={...Z([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Qs=(e,t,o)=>{const n=((e,t)=>Nr(e)?((e,t)=>{const o=Er(e);return E(o,(e,o)=>({element:e.element,width:t[o],colspan:e.colspan}))})(e,t):((e,t)=>{const o=kr(e);return E(o,e=>{const o=((e,t,o)=>{let n=0;for(let r=e;r<t;r++)n+=void 0!==o[r]?o[r]:0;return n})(e.column,e.column+e.colspan,t);return{element:e.element,width:o,colspan:e.colspan}})})(e,t))(e,t);N(n,e=>{o.setElementWidth(e.element,e.width)})},Xs=(e,t,o,n,r)=>{const s=Sr(e),l=r.getCellDelta(t),a=r.getWidths(s,r),c=o===s.grid.columns-1,i=n.clampTableDelta(a,o,l,r.minCellWidth(),c),m=((e,t,o,n,r)=>{const s=e.slice(0),l=((e,t)=>0===e.length?Js.none():1===e.length?Js.only(0):0===t?Js.left(0,1):t===e.length-1?Js.right(t-1,t):t>0&&t<e.length-1?Js.middle(t-1,t,t+1):Js.none())(e,t),a=g(E(s,g(0)));return l.fold(a,e=>n.singleColumnWidth(s[e],o),(e,t)=>r.calcLeftEdgeDeltas(s,e,t,o,n.minCellWidth(),n.isRelative),(e,t,l)=>r.calcMiddleDeltas(s,e,t,l,o,n.minCellWidth(),n.isRelative),(e,t)=>r.calcRightEdgeDeltas(s,e,t,o,n.minCellWidth(),n.isRelative))})(a,o,i,r,n),d=E(m,(e,t)=>e+a[t]);Qs(s,d,r),n.resizeTable(r.adjustTableWidth,i,c)},Zs=(e,t,o)=>{const n=Sr(e),r=((e,t)=>Os(e,t,ps,e=>e.getOrThunk(er)))(n,e),s=E(r,(e,n)=>o===n?Math.max(t+e,er()):e),l=((e,t)=>E(e.all,(e,o)=>({element:e.element,height:t[o]})))(n,s);N(l,e=>{ms(e.element,e.height)}),N(kr(n),e=>{(e=>{zo(e,"height")})(e.element)});const a=z(s,(e,t)=>e+t,0);ms(e,a)},el=(e,t)=>{if(!Qn(e)){const o=(e=>fs(e).bind(e=>{return t=e,o=["fixed","relative","empty"],C.from(Fn.exec(t)).bind(e=>{const t=Number(e[1]),n=e[2];return((e,t)=>O(t,t=>O(In[t],t=>e===t)))(n,o)?C.some({value:t,unit:n}):C.none()});var t,o}))(e);o.each(o=>{const n=o.value/2;bs(e,n,o.unit),bs(t,n,o.unit)})}},tl=(e,t,o)=>{const n=Yn(e,t,1);1===o||n<=1?po(e,t):uo(e,t,Math.min(o,n))},ol=(e,t)=>o=>{const n=o.column+o.colspan-1,r=o.column;return n>=e&&r<t},nl=(e,t,o)=>{const n=e[o].element,r=Le.fromTag("td");lo(r,Le.fromTag("br")),(t?lo:so)(n,r)},rl=Pt("col"),sl=Pt("colgroup"),ll=e=>"tr"===Nt(e)||sl(e),al=e=>({element:e,colspan:Yn(e,"colspan",1),rowspan:Yn(e,"rowspan",1)}),cl=e=>ho(e,"scope").map(e=>e.substr(0,3)),il=(e,t=al)=>{const o=o=>{if(ll(o))return sl((r={element:o}).element)?e.colgroup(r):e.row(r);{const r=o,s=(t=>rl(t.element)?e.col(t):e.cell(t))(t(r));return n=C.some({item:r,replacement:s}),s}var r};let n=C.none();return{getOrInit:(e,t)=>n.fold(()=>o(e),n=>t(e,n.item)?n.replacement:o(e))}},ml=e=>t=>{const o=[],n=n=>{const r="td"===e?{scope:null}:{},s=t.replace(n,e,r);return o.push({item:n,sub:s}),s};return{replaceOrInit:(e,t)=>{if(ll(e)||rl(e))return e;{const r=e;return((e,t)=>W(o,o=>t(o.item,e)))(r,t).fold(()=>n(r),o=>t(e,o.item)?o.sub:n(r))}}}},dl=e=>({unmerge:t=>{const o=cl(t);return o.each(e=>uo(t,"scope",e)),()=>{const n=e.cell({element:t,colspan:1,rowspan:1});return zo(n,"width"),zo(t,"width"),o.each(e=>uo(n,"scope",e)),n}},merge:e=>(zo(e[0],"width"),(()=>{const t=me(E(e,cl));if(0===t.length)return C.none();{const e=t[0],o=["row","col"];return O(t,t=>t!==e&&D(o,t))?C.none():C.from(e)}})().fold(()=>po(e[0],"scope"),t=>uo(e[0],"scope",t+"group")),g(e[0]))}),ul=Z([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),fl=(e,t,o)=>{const n=o.substring(0,o.length-e.length),r=parseFloat(n);return n===r.toString()?t(r):ul.invalid(o)},gl={...ul,from:e=>be(e,"%")?fl("%",ul.percent,e):be(e,"px")?fl("px",ul.pixels,e):ul.invalid(e)},hl=(e,t,o)=>{const n=gl.from(o),r=P(e,e=>"0px"===e)?((e,t)=>{const o=e.fold(()=>g(""),e=>g(e/t+"px"),()=>g(100/t+"%"));return k(t,o)})(n,e.length):((e,t,o)=>e.fold(()=>t,e=>((e,t,o)=>{const n=o/t;return E(e,e=>gl.from(e).fold(()=>e,e=>e*n+"px",e=>e/100*o+"px"))})(t,o,e),e=>((e,t)=>E(e,e=>gl.from(e).fold(()=>e,e=>e/t*100+"%",e=>e+"%")))(t,o)))(n,e,t);return wl(r)},pl=(e,t)=>0===e.length?t:z(e,(e,t)=>gl.from(t).fold(g(0),h,h)+e,0),bl=(e,t)=>gl.from(e).fold(g(e),e=>e+t+"px",e=>e+t+"%"),wl=e=>{if(0===e.length)return e;const t=z(e,(e,t)=>{const o=gl.from(t).fold(()=>({value:t,remainder:0}),e=>(e=>{const t=Math.floor(e);return{value:t+"px",remainder:e-t}})(e),e=>({value:e+"%",remainder:0}));return{output:[o.value].concat(e.output),remainder:e.remainder+o.remainder}},{output:[],remainder:0}),o=t.output;return o.slice(0,o.length-1).concat([bl(o[o.length-1],Math.round(t.remainder))])},vl=gl.from,yl=(e,t,o)=>{const n=Sr(e),r=n.all,s=kr(n),l=Er(n);t.each(t=>{const o=vl(t).fold(g("px"),g("px"),g("%")),r=Io(e),a=((e,t)=>Ts(e,t,xs,Rs))(n,e),c=hl(a,r,t);Nr(n)?((e,t,o)=>{N(t,(t,n)=>{const r=pl([e[n]],Zn());ko(t.element,"width",r+o)})})(c,l,o):((e,t,o)=>{N(t,t=>{const n=e.slice(t.column,t.colspan+t.column),r=pl(n,Zn());ko(t.element,"width",r+o)})})(c,s,o),ko(e,"width",t)}),o.each(t=>{const o=Mo(e),l=((e,t)=>Os(e,t,Cs,Rs))(n,e);((e,t,o)=>{N(o,e=>{zo(e.element,"height")}),N(t,(t,o)=>{ko(t.element,"height",e[o])})})(hl(l,o,t),r,s),ko(e,"height",t)})},xl=e=>fs(e).exists(e=>ns.test(e)),Cl=e=>fs(e).exists(e=>rs.test(e)),Sl=e=>fs(e).isNone();var Tl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Rl=()=>({up:g({selector:nn,closest:ln,predicate:tn,all:Vt}),down:g({selector:bn,predicate:gn}),styles:g({get:No,getRaw:_o,set:ko,remove:zo}),attrs:g({get:go,set:uo,remove:po,copyTo:(e,t)=>{const o=bo(e);fo(t,o)}}),insert:g({before:no,after:ro,afterAll:co,append:lo,appendAll:io,prepend:so,wrap:ao}),remove:g({unwrap:yo,remove:vo}),create:g({nu:Le.fromTag,clone:e=>Le.fromDom(e.dom.cloneNode(!1)),text:Le.fromText}),query:g({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:qt,nextSibling:Ut}),property:g({children:Gt,name:Nt,parent:Ht,document:e=>Ft(e).dom,isText:Lt,isComment:zt,isElement:Wt,isSpecial:e=>{const t=Nt(e);return D(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>Wt(e)?ho(e,"lang"):C.none(),getText:Yo,setText:Qo,isBoundary:e=>!!Wt(e)&&("body"===Nt(e)||D(Tl,Nt(e))),isEmptyTag:e=>!!Wt(e)&&D(["br","img","hr","input"],Nt(e)),isNonEditable:e=>Wt(e)&&"false"===go(e,"contenteditable")}),eq:Je,is:Xe});const Dl=(e,t)=>({item:e,mode:t}),Ol=(e,t,o,n=kl)=>e.property().parent(t).map(e=>Dl(e,n)),kl=(e,t,o,n=El)=>o.sibling(e,t).map(e=>Dl(e,n)),El=(e,t,o,n=El)=>{const r=e.property().children(t);return o.first(r).map(e=>Dl(e,n))},Nl=[{current:Ol,next:kl,fallback:C.none()},{current:kl,next:El,fallback:C.some(Ol)},{current:El,next:El,fallback:C.some(kl)}],Bl=(e,t,o,n,r=Nl)=>W(r,e=>e.current===o).bind(o=>o.current(e,t,n,o.next).orThunk(()=>o.fallback.bind(o=>Bl(e,t,o,n)))),_l=(e,t,o,n,r,s)=>Bl(e,t,n,r).bind(t=>s(t.item)?C.none():o(t.item)?C.some(t.item):_l(e,t.item,o,t.mode,r,s)),zl=(e,t)=>({element:e,offset:t}),Al=(e,t,o)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?o(t).bind(t=>Al(e,t,o).orThunk(()=>C.some(t))):C.none(),Wl=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,Ll=(e,t)=>{const o=Al(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return zl(o,Wl(e,o));const n=e.property().children(o);return n.length>0?Ll(e,n[n.length-1]):zl(o,Wl(e,o))},Ml=Ll,jl=Rl(),Pl=e=>t=>0===e.property().children(t).length,Il=(e,t,o,n)=>_l(e,t,o,kl,{sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?C.some(e[e.length-1]):C.none()},n),Fl=(e,t,o,n)=>_l(e,t,o,kl,{sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?C.some(e[0]):C.none()},n),Hl=Rl(),$l=(e,t)=>((e,t,o)=>Il(e,t,Pl(e),o))(Hl,e,t),Vl=(e,t)=>((e,t,o)=>Fl(e,t,Pl(e),o))(Hl,e,t),ql=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ul=(e,t,o,n)=>{const r=t(e,o);return z(n,(o,n)=>{const r=t(e,n);return Gl(e,o,r)},r)},Gl=(e,t,o)=>t.bind(t=>o.filter(b(e.eq,t))),Kl=Rl(),Yl=(e,t)=>((e,t,o)=>o.length>0?((e,t,o,n)=>n(e,t,o[0],o.slice(1)))(e,t,o,Ul):C.none())(Kl,(t,o)=>e(o),t),Jl=Rl(),Ql=e=>((e,t)=>{const o=e.property().name(t);return D(ql,o)})(Jl,e),Xl=e=>((e,t)=>{const o=e.property().name(t);return D(["ol","ul"],o)})(Jl,e),Zl=e=>{po(e,"width"),po(e,"height")},ea=e=>{const t=ws(e);yl(e,C.some(t),C.none()),Zl(e)},ta=e=>{const t=(e=>Io(e)+"px")(e);yl(e,C.some(t),C.none()),Zl(e)},oa=e=>{zo(e,"width");const t=sr(e),o=t.length>0?t:rr(e);N(o,e=>{zo(e,"width"),Zl(e)}),Zl(e)},na={scope:["row","col"]},ra=e=>()=>{const t=Le.fromTag("td",e.dom);return lo(t,Le.fromTag("br",e.dom)),t},sa=e=>()=>Le.fromTag("col",e.dom),la=e=>()=>Le.fromTag("colgroup",e.dom),aa=e=>()=>Le.fromTag("tr",e.dom),ca=(e,t,o)=>{const n=((e,t)=>{const o=To(e,t),n=Gt(So(e));return io(o,n),o})(e,t);return G(o,(e,t)=>{null===e?po(n,t):uo(n,t,e)}),n},ia=e=>e,ma=(e,t,o)=>{const n=(e,t)=>{((e,t)=>{const o=e.dom,n=t.dom;Ro(o)&&Ro(n)&&(n.style.cssText=o.style.cssText)})(e.element,t),zo(t,"height"),1!==e.colspan&&zo(t,"width")};return{col:o=>{const r=Le.fromTag(Nt(o.element),t.dom);return n(o,r),e(o.element,r),r},colgroup:la(t),row:aa(t),cell:r=>{const s=Le.fromTag(Nt(r.element),t.dom),l=o.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=l.length>0?((e,t,o)=>xn(e).map(n=>{const r=o.join(","),s=hn(n,r,t=>Je(t,e));return z(s,(e,t)=>{const o=Co(t);return lo(e,o),o},t)}).getOr(t))(r.element,s,l):s;return lo(a,Le.fromTag("br")),n(r,s),((e,t)=>{G(na,(o,n)=>ho(e,n).filter(e=>D(o,e)).each(e=>uo(t,n,e)))})(r.element,s),e(r.element,s),s},replace:ca,colGap:sa(t),gap:ra(t)}},da=e=>({col:sa(e),colgroup:la(e),row:aa(e),cell:ra(e),replace:ia,colGap:sa(e),gap:ra(e)}),ua=e=>Sr(e).grid,fa=(e,t,o,n)=>{const r=ze(e).rows;let s=!0;for(let e=0;e<r.length;e++)for(let l=0;l<_e(r[0]);l++){const a=r[e],c=Ne(a,l),i=o(c.element,t);i&&!s?ke(a,l,Te(n(),!0,c.isLocked)):i&&(s=!1)}return e},ga=(e,t)=>({rowDelta:0,colDelta:_e(e[0])-_e(t[0])}),ha=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),pa=(e,t,o,n)=>{const r="colgroup"===t.section?o.col:o.cell;return k(e,e=>Te(r(),!0,n(e)))},ba=(e,t,o,n)=>{const r=e[e.length-1];return e.concat(k(t,()=>{const e="colgroup"===r.section?o.colgroup:o.row,t=Ae(r,e,h),s=pa(t.cells.length,t,o,e=>X(n,e.toString()));return Ee(t,s)}))},wa=(e,t,o,n)=>E(e,e=>{const r=pa(t,e,o,y);return De(e,n,r)}),va=(e,t,o)=>{const n=t.colDelta<0?wa:h,r=t.rowDelta<0?ba:h,s=vr(e),l=_e(e[0]),a=O(s,e=>e===l-1),c=n(e,Math.abs(t.colDelta),o,a?l-1:l),i=vr(c);return r(c,Math.abs(t.rowDelta),o,I(i,x))},ya=(e,t,o,n)=>{const r=b(n,Ne(e[t],o).element),s=e[t];return e.length>1&&_e(s)>1&&(o>0&&r(Be(s,o-1))||o<s.cells.length-1&&r(Be(s,o+1))||t>0&&r(Be(e[t-1],o))||t<e.length-1&&r(Be(e[t+1],o)))},xa=(e,t,o)=>_(o,o=>o>=e.column&&o<=_e(t[0])+e.column),Ca=(e,t,o,n,r)=>{((e,t,o,n)=>{t>0&&t<e[0].cells.length&&N(e,e=>{const r=e.cells[t-1];let s=0;const l=n();for(;e.cells.length>t+s&&o(r.element,e.cells[t+s].element);)ke(e,t+s,Te(l,!0,e.cells[t+s].isLocked)),s++})})(t,e,r,n.cell);const s=ha(o,t),l=va(o,s,n),a=ha(t,l),c=va(t,a,n);return E(c,(t,o)=>De(t,e,l[o].cells))},Sa=(e,t,o,n,r)=>{((e,t,o,n)=>{const r=ze(e).rows;if(t>0&&t<r.length){const e=((e,t)=>A(e,(e,o)=>O(e,e=>t(e.element,o.element))?e:e.concat([o]),[]))(r[t-1].cells,o);N(e,e=>{let s=C.none();for(let l=t;l<r.length;l++)for(let t=0;t<_e(r[0]);t++){const a=r[l],c=Ne(a,t);o(c.element,e.element)&&(s.isNone()&&(s=C.some(n())),s.each(e=>{ke(a,t,Te(e,!0,c.isLocked))}))}})}})(t,e,r,n.cell);const s=vr(t),l=ga(t,o),a={...l,colDelta:l.colDelta-s.length},c=va(t,a,n),{cols:i,rows:m}=ze(c),d=vr(c),u=ga(o,t),f={...u,colDelta:u.colDelta+d.length},g=(p=n,b=d,E(o,e=>A(b,(t,o)=>{const n=pa(1,e,p,x)[0];return Oe(t,o,n)},e))),h=va(g,f,n);var p,b;return[...i,...m.slice(0,e),...h,...m.slice(e,m.length)]},Ta=(e,t,o,n,r)=>{const{rows:s,cols:l}=ze(e),a=s.slice(0,t),c=s.slice(t);return[...l,...a,((e,t,o,n)=>Ae(e,e=>n(e,o),t))(s[o],(e,o)=>t>0&&t<s.length&&n(Be(s[t-1],o),Be(s[t],o))?Ne(s[t],o):Te(r(e.element,n),!0,e.isLocked),n,r),...c]},Ra=(e,t,o,n,r)=>E(e,e=>{const s=t>0&&t<_e(e)&&n(Be(e,t-1),Be(e,t)),l=((e,t,o,n,r,s,l)=>{if("colgroup"!==o&&n)return Ne(e,t);{const t=Ne(e,r);return Te(l(t.element,s),!0,!1)}})(e,t,e.section,s,o,n,r);return Oe(e,t,l)}),Da=(e,t,o,n)=>((e,t,o,n)=>void 0!==Be(e[t],o)&&t>0&&n(Be(e[t-1],o),Be(e[t],o)))(e,t,o,n)||((e,t,o)=>t>0&&o(Be(e,t-1),Be(e,t)))(e[t],o,n),Oa=(e,t,o,n)=>{const r=e=>(e=>"row"===e?(e=>Jn(e,"rowspan")>1)(t):Qn(t))(e)?`${e}group`:e;return e?ir(t)?r(o):null:n&&ir(t)?r("row"===o?"col":"row"):null},ka=(e,t,o)=>Te(o(e.element,t),!0,e.isLocked),Ea=(e,t,o,n,r,s,l)=>E(e,(e,a)=>(e=>{const c=e.cells,i=E(c,(e,c)=>{if((e=>O(t,t=>o(e.element,t.element)))(e)){const t=l(e,a,c)?r(e,o,n):e;return s(t,a,c).each(e=>{var o,n;o=t.element,n={scope:C.from(e)},G(n,(e,t)=>{e.fold(()=>{po(o,t)},e=>{mo(o.dom,t,e)})})}),t}return e});return Re(e.element,i,e.section,e.isNew)})(e)),Na=(e,t,o)=>j(e,(n,r)=>Da(e,r,t,o)?[]:[Ne(n,t)]),Ba=(e,t,o,n,r)=>{const s=ze(e).rows,l=j(t,e=>Na(s,e,n)),a=E(s,e=>mr(e.cells)),c=((e,t)=>P(t,h)&&mr(e)?x:(e,o,n)=>!("th"===Nt(e.element)&&t[o]))(l,a),i=((e,t)=>(o,n)=>C.some(Oa(e,o.element,"row",t[n])))(o,a);return Ea(e,l,n,r,ka,i,c)},_a=(e,t,o,n)=>{const r=ze(e).rows,s=E(t,e=>Ne(r[e.row],e.column));return Ea(e,s,o,n,ka,C.none,x)},za=e=>A(e,(e,t)=>O(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),Aa=e=>un(e,!0),Wa=e=>{0===rr(e).length&&vo(e)},La=(e,t)=>({grid:e,cursor:t}),Ma=(e,t,o)=>{const n=((e,t,o)=>{var n,r;const s=ze(e).rows;return C.from(null===(r=null===(n=s[t])||void 0===n?void 0:n.cells[o])||void 0===r?void 0:r.element).filter(Aa).orThunk(()=>(e=>V(e,e=>V(e.cells,e=>{const t=e.element;return de(Aa(t),t)})))(s))})(e,t,o);return La(e,n)},ja=e=>A(e,(e,t)=>O(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),Pa=(e,t,o,n)=>{const r=t[0].row,s=ja(t),l=z(s,(e,t)=>({grid:Ta(e.grid,r,t.row+e.delta,o,n.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Ma(l,r,t[0].column)},Ia=(e,t,o,n)=>{const r=ja(t),s=r[r.length-1],l=s.row+s.rowspan,a=z(r,(e,t)=>Ta(e,l,t.row,o,n.getOrInit),e);return Ma(a,l,t[0].column)},Fa=(e,t,o,n)=>{const r=t.details,s=za(r),l=s[0].column,a=z(s,(e,t)=>({grid:Ra(e.grid,l,t.column+e.delta,o,n.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Ma(a,r[0].row,l)},Ha=(e,t,o,n)=>{const r=t.details,s=r[r.length-1],l=s.column+s.colspan,a=za(r),c=z(a,(e,t)=>Ra(e,l,t.column,o,n.getOrInit),e);return Ma(c,r[0].row,l)},$a=(e,t,o,n)=>{const r=za(t),s=E(r,e=>e.column),l=Ba(e,s,!0,o,n.replaceOrInit);return Ma(l,t[0].row,t[0].column)},Va=(e,t,o,n)=>{const r=_a(e,t,o,n.replaceOrInit);return Ma(r,t[0].row,t[0].column)},qa=(e,t,o,n)=>{const r=za(t),s=E(r,e=>e.column),l=Ba(e,s,!1,o,n.replaceOrInit);return Ma(l,t[0].row,t[0].column)},Ua=(e,t,o,n)=>{const r=_a(e,t,o,n.replaceOrInit);return Ma(r,t[0].row,t[0].column)},Ga=(e,t)=>(o,n,r,s,l)=>{const a=ja(n),c=E(a,e=>e.row),i=((e,t,o,n,r,s,l)=>{const{cols:a,rows:c}=ze(e),i=c[t[0]],m=j(t,e=>((e,t,o)=>{const n=e[t];return j(n.cells,(n,r)=>Da(e,t,r,o)?[]:[n])})(c,e,r)),d=E(i.cells,(e,t)=>mr(Na(c,t,r))),u=[...c];N(t,e=>{u[e]=l.transformRow(c[e],o)});const f=[...a,...u],g=((e,t)=>P(t,h)&&mr(e.cells)?x:(e,o,n)=>!("th"===Nt(e.element)&&t[n]))(i,d),p=((e,t)=>(o,n,r)=>C.some(Oa(e,o.element,"col",t[r])))(n,d);return Ea(f,m,r,s,l.transformCell,p,g)})(o,c,e,t,r,s.replaceOrInit,l);return Ma(i,n[0].row,n[0].column)},Ka=Ga("thead",!0),Ya=Ga("tbody",!1),Ja=Ga("tfoot",!1),Qa=(e,t,o,n)=>{const r=za(t.details),s=((e,t)=>j(e,e=>{const o=e.cells,n=z(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,o);return n.length>0?[Re(e.element,n,e.section,e.isNew)]:[]}))(e,E(r,e=>e.column)),l=s.length>0?s[0].cells.length-1:0;return Ma(s,r[0].row,Math.min(r[0].column,l))},Xa=(e,t,o,n)=>{const r=ja(t),s=((e,t,o)=>{const{rows:n,cols:r}=ze(e);return[...r,...n.slice(0,t),...n.slice(o+1)]})(e,r[0].row,r[r.length-1].row),l=Math.max(ze(s).rows.length-1,0);return Ma(s,Math.min(t[0].row,l),t[0].column)},Za=(e,t,o,n)=>{const r=t.cells;(e=>{const t=Pt("br"),o=(()=>{const o=j(e,e=>{const o=Gt(e);return(e=>P(e,e=>t(e)||Lt(e)&&0===Yo(e).trim().length))(o)?[]:o.concat((e=>Cn(e).bind(o=>{const n=Ut(o).map(e=>!!Ql(e)||!!((e,t)=>D(["br","img","hr","input"],e.property().name(t)))(Jl,e)&&"img"!==Nt(e)).getOr(!1);return Ht(o).map(r=>{return!0===n||"li"===Nt(s=r)||tn(s,Xl).isSome()||t(o)||Ql(r)&&!Je(e,r)?[]:[Le.fromTag("br")];var s})}).getOr([]))(e))});return 0===o.length?[Le.fromTag("br")]:o})();wo(e[0]),io(e[0],o)})(r);const s=((e,t,o,n)=>{const r=ze(e).rows;if(0===r.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let o=t.startCol;o<=t.finishCol;o++){const t=r[e],s=Ne(t,o).isLocked;ke(t,o,Te(n(),!1,s))}return e})(e,t.bounds,0,n.merge(r));return La(s,C.from(r[0]))},ec=(e,t,o,n)=>{const r=z(t,(e,t)=>fa(e,t,o,n.unmerge(t)),e);return La(r,C.from(t[0]))},tc=(e,t,o,n)=>{const r=((e,t)=>{const o=Sr(e);return js(o,t,!0)})(t.clipboard,t.generators);var s,l;return((e,t,o,n,r)=>{const s=vr(t),l=((e,t,o)=>{const n=_e(t[0]),r=ze(t).cols.length+e.row,s=k(n-e.column,t=>t+e.column);return{row:r,column:W(s,e=>P(o,t=>t!==e)).getOr(n-1)}})(e,t,s),a=ze(o).rows,c=xa(l,a,s),i=((e,t,o)=>{if(e.row>=t.length||e.column>_e(t[0]))return le.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const n=t.slice(e.row),r=n[0].cells.slice(e.column),s=_e(o[0]),l=o.length;return le.value({rowDelta:n.length-l,colDelta:r.length-s})})(l,t,a);return i.map(e=>{const o={...e,colDelta:e.colDelta-c.length},s=va(t,o,n),i=vr(s),m=xa(l,a,i);return((e,t,o,n,r,s)=>{const l=e.row,a=e.column,c=l+o.length,i=a+_e(o[0])+s.length,m=I(s,x);for(let e=l;e<c;e++){let s=0;for(let c=a;c<i;c++){if(m[c]){s++;continue}ya(t,e,c,r)&&fa(t,Be(t[e],c),r,n.cell);const i=c-a-s,d=Ne(o[e-l],i),u=d.element,f=n.replace(u);ke(t[e],c,Te(f,!0,d.isLocked))}}return t})(l,s,a,n,r,m)})})((s=t.row,l=t.column,{row:s,column:l}),e,r,t.generators,o).fold(()=>La(e,C.some(t.element)),e=>Ma(e,t.row,t.column))},oc=(e,t,o)=>{const n=((e,t)=>gr(e,()=>t))(e,o.section),r=Tr(n);return js(r,t,!0)},nc=(e,t,o,n)=>{const r=ze(e).rows,s=t.cells[0].column,l=r[t.cells[0].row],a=oc(t.clipboard,t.generators,l),c=Ca(s,e,a,t.generators,o);return Ma(c,t.cells[0].row,t.cells[0].column)},rc=(e,t,o,n)=>{const r=ze(e).rows,s=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,l=r[t.cells[0].row],a=oc(t.clipboard,t.generators,l),c=Ca(s,e,a,t.generators,o);return Ma(c,t.cells[0].row,s)},sc=(e,t,o,n)=>{const r=ze(e).rows,s=t.cells[0].row,l=r[s],a=oc(t.clipboard,t.generators,l),c=Sa(s,e,a,t.generators,o);return Ma(c,t.cells[0].row,t.cells[0].column)},lc=(e,t,o,n)=>{const r=ze(e).rows,s=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,l=r[t.cells[0].row],a=oc(t.clipboard,t.generators,l),c=Sa(s,e,a,t.generators,o);return Ma(c,s,t.cells[0].column)},ac=(e,t,o,n)=>((e,t,o,n)=>{const r=Tr(t),s=n.getWidths(r,n);Qs(r,s,n)})(0,t,0,n.sizing),cc=(e,t,o,n)=>((e,t,o,n,r)=>{const s=Tr(t),l=n.getWidths(s,n),a=n.pixelWidth(),{newSizes:c,delta:i}=r.calcRedestributedWidths(l,a,o.pixelDelta,n.isRelative);Qs(s,c,n),n.adjustTableWidth(i)})(0,t,o,n.sizing,n.resize),ic=(e,t)=>O(t,e=>0===e.column&&e.isLocked),mc=(e,t)=>O(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),dc=(e,t)=>{const o=Fr(e),n=za(t);return A(n,(e,t)=>e+o[t.column].map(Fo).getOr(0),0)},uc=e=>(t,o)=>qs(t,o).filter(o=>!(e?ic:mc)(t,o)).map(e=>({details:e,pixelDelta:dc(t,e)})),fc=(e,t)=>Us(e,t).map(t=>({details:t,pixelDelta:-dc(e,t)})),gc=e=>(t,o)=>Vs(t,o).filter(o=>!(e?ic:mc)(t,o.cells)),hc=ml("th"),pc=ml("td"),bc=(e,t,o,n)=>Hs(Pa,qs,f,f,il,e,t,o,n),wc=(e,t,o,n)=>Hs(Ia,qs,f,f,il,e,t,o,n),vc=(e,t,o,n)=>Hs(Fa,uc(!0),cc,f,il,e,t,o,n),yc=(e,t,o,n)=>Hs(Ha,uc(!1),cc,f,il,e,t,o,n),xc=(e,t,o,n)=>Hs(Qa,fc,cc,Wa,il,e,t,o,n),Cc=(e,t,o,n)=>Hs(Xa,qs,f,Wa,il,e,t,o,n),Sc=(e,t,o,n)=>Hs($a,Us,f,f,hc,e,t,o,n),Tc=(e,t,o,n)=>Hs(qa,Us,f,f,pc,e,t,o,n),Rc=(e,t,o,n)=>Hs(Ka,qs,f,f,hc,e,t,o,n),Dc=(e,t,o,n)=>Hs(Ya,qs,f,f,pc,e,t,o,n),Oc=(e,t,o,n)=>Hs(Ja,qs,f,f,pc,e,t,o,n),kc=(e,t,o,n)=>Hs(Va,Us,f,f,hc,e,t,o,n),Ec=(e,t,o,n)=>Hs(Ua,Us,f,f,pc,e,t,o,n),Nc=(e,t,o,n)=>Hs(Za,Ks,ac,f,dl,e,t,o,n),Bc=(e,t,o,n)=>Hs(ec,Ys,ac,f,dl,e,t,o,n),_c=(e,t,o,n)=>Hs(tc,$s,ac,f,il,e,t,o,n),zc=(e,t,o,n)=>Hs(nc,gc(!0),f,f,il,e,t,o,n),Ac=(e,t,o,n)=>Hs(rc,gc(!1),f,f,il,e,t,o,n),Wc=(e,t,o,n)=>Hs(sc,Vs,f,f,il,e,t,o,n),Lc=(e,t,o,n)=>Hs(lc,Vs,f,f,il,e,t,o,n),Mc=(e,t)=>{const o=Sr(e);return qs(o,t).bind(e=>{const t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,s=M(E(o.all,e=>_(e.cells,e=>e.column>=n&&e.column<r)));return fr(s)}).getOr("")},jc=(e,t)=>{const o=Sr(e);return qs(o,t).bind(fr).getOr("")},Pc=(e,t)=>{const o=Sr(e);return qs(o,t).bind(e=>{const t=e[e.length-1],n=e[0].row,r=t.row+t.rowspan;return(e=>{const t=E(e,e=>ur(e).type),o=D(t,"header"),n=D(t,"footer");if(o||n){const e=D(t,"body");return!o||e||n?o||e||!n?C.none():C.some("footer"):C.some("header")}return C.some("body")})(o.all.slice(n,r))}).getOr("")},Ic=(e,t)=>{const o=t.column,n=t.column+t.colspan-1,r=t.row,s=t.row+t.rowspan-1;return o<=e.finishCol&&n>=e.startCol&&r<=e.finishRow&&s>=e.startRow},Fc=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Hc=(e,t,o)=>{const n=Dr(e,t,Je),r=Dr(e,o,Je);return n.bind(e=>r.map(t=>{return o=e,n=t,{startRow:Math.min(o.row,n.row),startCol:Math.min(o.column,n.column),finishRow:Math.max(o.row+o.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(o.column+o.colspan-1,n.column+n.colspan-1)};var o,n}))},$c=(e,t,o)=>Hc(e,t,o).map(t=>{const o=Or(e,b(Ic,t));return E(o,e=>e.element)}),Vc=(e,t)=>Dr(e,t,(e,t)=>Qe(t,e)).map(e=>e.element),qc=(e,t,o)=>{const n=Gc(e);return $c(n,t,o)},Uc=(e,t,o,n,r)=>{const s=Gc(e),l=Je(e,o)?C.some(t):Vc(s,t),a=Je(e,r)?C.some(n):Vc(s,n);return l.bind(e=>a.bind(t=>$c(s,e,t)))},Gc=Sr,Kc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Yc=(e,t,o,n)=>k(e,e=>((e,t,o,n)=>{const r=Le.fromTag("tr");for(let s=0;s<e;s++){const e=Le.fromTag(n<t||s<o?"th":"td");s<o&&uo(e,"scope","row"),n<t&&uo(e,"scope","col"),lo(e,Le.fromTag("br")),lo(r,e)}return r})(t,o,n,e)),Jc=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=_(t,t=>t!==e)},trigger:(...o)=>{const n={};N(e,(e,t)=>{n[e]=o[t]}),N(t,e=>{e(n)})}}},Qc=e=>({registry:K(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:K(e,e=>e.trigger)}),Xc=ne(["compare","extract","mutate","sink"]),Zc=ne(["element","start","stop","destroy"]),ei=ne(["forceDrop","drop","move","delayDrop"]),ti=ce("ephox-dragster").resolve;var oi=Xc({compare:(e,t)=>Vo(t.left-e.left,t.top-e.top),extract:e=>C.some(Vo(e.x,e.y)),sink:(e,t)=>{const o=(e=>{const t={layerClass:ti("blocker"),...e},o=Le.fromTag("div");return uo(o,"role","presentation"),Eo(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),cn(o,ti("blocker")),cn(o,t.layerClass),{element:g(o),destroy:()=>{vo(o)}}})(t),n=to(o.element(),"mousedown",e.forceDrop),r=to(o.element(),"mouseup",e.drop),s=to(o.element(),"mousemove",e.move),l=to(o.element(),"mouseout",e.delayDrop);return Zc({element:o.element,start:e=>{lo(e,o.element())},stop:()=>{vo(o.element())},destroy:()=>{o.destroy(),r.unbind(),s.unbind(),l.unbind(),n.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const ni=ce("ephox-snooker").resolve,ri=ni("resizer-bar"),si=ni("resizer-rows"),li=ni("resizer-cols"),ai=e=>{const t=bn(e.parent(),"."+ri);N(t,vo)},ci=(e,t,o)=>{const n=e.origin();N(t,t=>{t.each(t=>{const r=o(n,t);cn(r,ri),lo(e.parent(),r)})})},ii=(e,t)=>{if(ai(e),e.isResizable(t)){const o=Sr(t);((e,t,o,n,r)=>{const s=Uo(o),l=t.isResizable,a=n.length>0?es.positions(n,o):[],c=a.length>0?((e,t)=>j(e.all,(e,o)=>t(e.element)?[o]:[]))(e,l):[];((e,t,o,n)=>{ci(e,t,(e,t)=>{const r=((e,t,o,n)=>{const r=Le.fromTag("div");return Eo(r,{position:"absolute",left:t+"px",top:o-3.5+"px",height:"7px",width:n+"px"}),fo(r,{"data-mce-bogus":"all","data-row":e,role:"presentation"}),r})(t.row,o.left-e.left,t.y-e.top,n);return cn(r,si),r})})(t,_(a,(e,t)=>O(c,e=>t===e)),s,Fo(o));const i=r.length>0?os.positions(r,o):[],m=i.length>0?((e,t)=>{const o=[];return k(e.grid.columns,n=>{Br(e,n).map(e=>e.element).forall(t)&&o.push(n)}),_(o,o=>{const n=Or(e,e=>e.column===o);return P(n,e=>t(e.element))})})(e,l):[];((e,t,o,n)=>{ci(e,t,(e,t)=>{const r=((e,t,o,n,r)=>{const s=Le.fromTag("div");return Eo(s,{position:"absolute",left:t-3.5+"px",top:o+"px",height:r+"px",width:"7px"}),fo(s,{"data-mce-bogus":"all","data-column":e,role:"presentation"}),s})(t.col,t.x-e.left,o.top-e.top,0,n);return cn(r,li),r})})(t,_(i,(e,t)=>O(m,e=>t===e)),s,jo(o))})(o,e,t,$r(o),Fr(o))}},mi=(e,t)=>{const o=bn(e.parent(),"."+ri);N(o,t)},di=e=>{mi(e,e=>{ko(e,"display","none")})},ui=e=>{mi(e,e=>{ko(e,"display","block")})},fi=ni("resizer-bar-dragging"),gi=e=>{const t=(()=>{const e=Qc({drag:Jc(["xDelta","yDelta","target"])});let t=C.none();const o=(()=>{const e=Qc({drag:Jc(["xDelta","yDelta"])});return{mutate:(t,o)=>{e.trigger.drag(t,o)},events:e.registry}})();return o.events.drag.bind(o=>{t.each(t=>{e.trigger.drag(o.xDelta,o.yDelta,t)})}),{assign:e=>{t=C.some(e)},get:()=>t,mutate:o.mutate,events:e.registry}})(),o=((e,t={})=>{var o;return((e,t,o)=>{let n=!1;const r=Qc({start:Jc([]),stop:Jc([])}),s=(()=>{const e=(()=>{const e=Qc({move:Jc(["info"])});return{onEvent:f,reset:f,events:e.registry}})(),t=(()=>{let e=C.none();const t=Qc({move:Jc(["info"])});return{onEvent:(o,n)=>{n.extract(o).each(o=>{const r=((t,o)=>{const n=e.map(e=>t.compare(e,o));return e=C.some(o),n})(n,o);r.each(e=>{t.trigger.move(e)})})},reset:()=>{e=C.none()},events:t.registry}})();let o=e;return{on:()=>{o.reset(),o=t},off:()=>{o.reset(),o=e},isOn:()=>o===t,onEvent:(e,t)=>{o.onEvent(e,t)},events:t.events}})(),l=()=>{m.stop(),s.isOn()&&(s.off(),r.trigger.stop())},c=(e=>{let t=null;const o=()=>{a(t)||(clearTimeout(t),t=null)};return{cancel:o,throttle:(...n)=>{o(),t=setTimeout(()=>{t=null,e.apply(null,n)},200)}}})(l);s.events.move.bind(o=>{t.mutate(e,o.info)});const i=e=>(...t)=>{n&&e.apply(null,t)},m=t.sink(ei({forceDrop:l,drop:i(l),move:i(e=>{c.cancel(),s.onEvent(e,t)}),delayDrop:i(c.throttle)}),o);return{element:m.element,go:e=>{m.start(e),s.on(),r.trigger.start()},on:()=>{n=!0},off:()=>{n=!1},isActive:()=>n,destroy:()=>{m.destroy()},events:r.registry}})(e,null!==(o=t.mode)&&void 0!==o?o:oi,t)})(t,{});let n=C.none();const r=(e,t)=>C.from(go(e,t));t.events.drag.bind(e=>{r(e.target,"data-row").each(t=>{const o=Xn(e.target,"top");ko(e.target,"top",o+e.yDelta+"px")}),r(e.target,"data-column").each(t=>{const o=Xn(e.target,"left");ko(e.target,"left",o+e.xDelta+"px")})});const s=(e,t)=>Xn(e,t)-Yn(e,"data-initial-"+t,0);o.events.stop.bind(()=>{t.get().each(t=>{n.each(o=>{r(t,"data-row").each(e=>{const n=s(t,"top");po(t,"data-initial-top"),d.trigger.adjustHeight(o,n,parseInt(e,10))}),r(t,"data-column").each(e=>{const n=s(t,"left");po(t,"data-initial-left"),d.trigger.adjustWidth(o,n,parseInt(e,10))}),ii(e,o)})})});const l=(n,r)=>{d.trigger.startAdjust(),t.assign(n),uo(n,"data-initial-"+r,Xn(n,r)),cn(n,fi),ko(n,"opacity","0.2"),o.go(e.dragContainer())},c=to(e.parent(),"mousedown",e=>{var t;t=e.target,mn(t,si)&&l(e.target,"top"),(e=>mn(e,li))(e.target)&&l(e.target,"left")}),i=t=>Je(t,e.view()),m=to(e.view(),"mouseover",t=>{var r;(r=t.target,ln(r,"table",i).filter(un)).fold(()=>{Do(t.target)&&!(e=>mn(e,"ephox-snooker-resizer-bar")||mn(e,"ephox-dragster-blocker"))(t.target)&&ai(e)},t=>{o.isActive()&&(n=C.some(t),ii(e,t))})}),d=Qc({adjustHeight:Jc(["table","delta","row"]),adjustWidth:Jc(["table","delta","column"]),startAdjust:Jc([])});return{destroy:()=>{c.unbind(),m.unbind(),o.destroy(),ai(e)},refresh:t=>{ii(e,t)},on:o.on,off:o.off,hideBars:b(di,e),showBars:b(ui,e),events:d.registry}},hi=e=>t=>t.options.get(e),pi="100%",bi=e=>{var t;const o=e.dom,n=null!==(t=o.getParent(e.selection.getStart(),o.isBlock))&&void 0!==t?t:e.getBody();return Ho(Le.fromDom(n))+"px"},wi=e=>C.from(e.options.get("table_clone_elements")),vi=hi("table_header_type"),yi=hi("table_column_resizing"),xi=e=>"preservetable"===yi(e),Ci=e=>"resizetable"===yi(e),Si=hi("table_sizing_mode"),Ti=e=>"relative"===Si(e),Ri=e=>"fixed"===Si(e),Di=e=>"responsive"===Si(e),Oi=hi("table_resize_bars"),ki=hi("table_style_by_css"),Ei=hi("table_merge_content_on_paste"),Ni=e=>{const t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:((e,t)=>Di(e)||ki(e)?t:Ri(e)?{...t,width:bi(e)}:{...t,width:pi})(e,o)},Bi=hi("table_use_colgroups"),_i=e=>Le.fromDom(e.getBody()),zi=e=>t=>Je(t,_i(e)),Ai=e=>{po(e,"data-mce-style");const t=e=>po(e,"data-mce-style");N(rr(e),t),N(sr(e),t),N(ar(e),t)},Wi=e=>Le.fromDom(e.selection.getStart()),Li=e=>e.getBoundingClientRect().width,Mi=e=>e.getBoundingClientRect().height,ji=e=>(t,o)=>{const n=t.dom.getStyle(o,e)||t.dom.getAttrib(o,e);return C.from(n).filter(ve)},Pi=ji("width"),Ii=ji("height"),Fi=e=>on(e,Pt("table")).exists(un),Hi=e=>nn(e,"table"),$i=(e,t,o)=>{const n=e=>t=>void 0!==o&&o(t)||Je(t,e);return Je(e,t)?C.some({boxes:C.some([e]),start:e,finish:t}):Hi(e).bind(r=>Hi(t).bind(s=>{if(Je(r,s))return C.some({boxes:qc(r,e,t),start:e,finish:t});if(Qe(r,s)){const o=hn(t,"td,th",n(r)),l=o.length>0?o[o.length-1]:t;return C.some({boxes:Uc(r,e,r,t,s),start:e,finish:l})}if(Qe(s,r)){const o=hn(e,"td,th",n(s)),l=o.length>0?o[o.length-1]:e;return C.some({boxes:Uc(s,e,r,t,s),start:e,finish:l})}return((e,t)=>((e,t,o,n=y)=>{const r=[t].concat(e.up().all(t)),s=[o].concat(e.up().all(o)),l=e=>L(e,n).fold(()=>e,t=>e.slice(0,t+1)),a=l(r),c=l(s),i=W(a,t=>O(c,((e,t)=>b(e.eq,t))(e,t)));return{firstpath:a,secondpath:c,shared:i}})(Kl,e,t,void 0))(e,t).shared.bind(l=>ln(l,"table",o).bind(o=>{const l=hn(t,"td,th",n(o)),a=l.length>0?l[l.length-1]:t,c=hn(e,"td,th",n(o)),i=c.length>0?c[c.length-1]:e;return C.some({boxes:Uc(o,e,r,t,s),start:i,finish:a})}))}))},Vi=(e,t)=>{const o=bn(e,t);return o.length>0?C.some(o):C.none()},qi=(e,t,o)=>sn(e,t).bind(t=>sn(e,o).bind(e=>Yl(Hi,[t,e]).map(o=>({first:t,last:e,table:o})))),Ui=(e,t)=>Vi(e,t),Gi=h,Ki=e=>{const t=(e,t)=>ho(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&P(e,e=>t(e,"rowspan")||t(e,"colspan"))?C.some(e):C.none()},Yi=(e,t,o)=>t.length<=1?C.none():((e,t,o)=>qi(e,t,o).bind(t=>{const o=t=>Je(e,t),n="thead,tfoot,tbody,table",r=nn(t.first,n,o),s=nn(t.last,n,o);return r.bind(e=>s.bind(o=>Je(e,o)?((e,t,o)=>((e,t,o)=>Hc(e,t,o).bind(t=>((e,t)=>{let o=!0;const n=b(Fc,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let s=t.startCol;s<=t.finishCol;s++)o=o&&Rr(e,r,s).exists(n);return o?C.some(t):C.none()})(e,t)))(Gc(e),t,o))(t.table,t.first,t.last):C.none()))}))(e,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>({bounds:e,cells:t})),Ji=(e,t)=>({selection:e,kill:t}),Qi=()=>({tag:"none"}),Xi=e=>({tag:"multiple",elements:e}),Zi=e=>({tag:"single",element:e}),em=(e,t,o,n)=>({start:Dn.on(e,t),finish:Dn.on(o,n)}),tm=(e,t)=>{const o=Ue(e,t);return Tn(Le.fromDom(o.startContainer),o.startOffset,Le.fromDom(o.endContainer),o.endOffset)},om=em,nm=(e,t,o,n,r)=>Je(o,n)?C.none():$i(o,n,t).bind(t=>{const n=t.boxes.getOr([]);return n.length>1?(r(e,n,t.start,t.finish),C.some(Ji(C.some(om(o,0,o,wn(o))),!0))):C.none()}),rm=Z([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),sm=e=>ln(e,"tr"),lm={...rm,verify:(e,t,o,n,r,s,l)=>ln(n,"td,th",l).bind(o=>ln(t,"td,th",l).map(t=>Je(o,t)?Je(n,o)&&wn(o)===r?s(t):rm.none("in same cell"):Yl(sm,[o,t]).fold(()=>((e,t,o)=>{const n=e.getRect(t),r=e.getRect(o);return r.right>n.left&&r.left<n.right})(e,t,o)?rm.success():s(t),e=>s(t)))).getOr(rm.none("default")),cata:(e,t,o,n,r)=>e.fold(t,o,n,r)},am=Pt("br"),cm=(e,t,o)=>t(e,o).bind(e=>Lt(e)&&0===Yo(e).trim().length?cm(e,t,o):C.some(e)),im=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),mm=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),dm=(e,t,o)=>({left:e.left+t,top:e.top+o,right:e.right+t,bottom:e.bottom+o}),um=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),fm=(e,t)=>C.some(e.getRect(t)),gm=(e,t,o)=>Wt(t)?fm(e,t).map(um):Lt(t)?((e,t,o)=>o>=0&&o<wn(t)?e.getRangedRect(t,o,t,o+1):o>0?e.getRangedRect(t,o-1,t,o):C.none())(e,t,o).map(um):C.none(),hm=(e,t)=>Wt(t)?fm(e,t).map(um):Lt(t)?e.getRangedRect(t,0,t,wn(t)).map(um):C.none(),pm=Z([{none:[]},{retry:["caret"]}]),bm=(e,t,o)=>on(t,Ql).fold(y,t=>hm(e,t).exists(e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(o,e))),wm={point:e=>e.bottom,adjuster:(e,t,o,n,r)=>{const s=im(r,5);return Math.abs(o.bottom-n.bottom)<1||o.top>r.bottom?pm.retry(s):o.top===r.bottom?pm.retry(im(r,1)):bm(e,t,r)?pm.retry(dm(s,5,0)):pm.none()},move:im,gather:Vl},vm=(e,t,o,n,r)=>0===r?C.some(n):((e,t,o)=>e.elementFromPoint(t,o).filter(e=>"table"===Nt(e)).isSome())(e,n.left,t.point(n))?((e,t,o,n,r)=>vm(e,t,o,t.move(n,5),r))(e,t,o,n,r-1):e.situsFromPoint(n.left,t.point(n)).bind(s=>s.start.fold(C.none,s=>hm(e,s).bind(l=>t.adjuster(e,s,l,o,n).fold(C.none,n=>vm(e,t,o,n,r-1))).orThunk(()=>C.some(n)),C.none)),ym=(e,t,o)=>{const n=e.move(o,5),r=vm(t,e,o,n,100).getOr(n);return((e,t,o)=>e.point(t)>o.getInnerHeight()?C.some(e.point(t)-o.getInnerHeight()):e.point(t)<0?C.some(-e.point(t)):C.none())(e,r,t).fold(()=>t.situsFromPoint(r.left,e.point(r)),o=>(t.scrollBy(0,o),t.situsFromPoint(r.left,e.point(r)-o)))},xm={tryUp:b(ym,{point:e=>e.top,adjuster:(e,t,o,n,r)=>{const s=mm(r,5);return Math.abs(o.top-n.top)<1||o.bottom<r.top?pm.retry(s):o.bottom===r.top?pm.retry(mm(r,1)):bm(e,t,r)?pm.retry(dm(s,5,0)):pm.none()},move:mm,gather:$l}),tryDown:b(ym,wm),getJumpSize:g(5)},Cm=(e,t,o,n,r,s)=>0===s?C.none():Rm(e,t,o,n,r).bind(l=>{const a=e.fromSitus(l),c=lm.verify(e,o,n,a.finish,a.foffset,r.failure,t);return lm.cata(c,()=>C.none(),()=>C.some(l),l=>Je(o,l)&&0===n?Sm(e,o,n,mm,r):Cm(e,t,l,0,r,s-1),l=>Je(o,l)&&n===wn(l)?Sm(e,o,n,im,r):Cm(e,t,l,wn(l),r,s-1))}),Sm=(e,t,o,n,r)=>gm(e,t,o).bind(t=>Tm(e,r,n(t,xm.getJumpSize()))),Tm=(e,t,o)=>{const n=kt().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,o):C.none()},Rm=(e,t,o,n,r)=>gm(e,o,n).bind(t=>Tm(e,r,t)),Dm=(e,t,o,n,r)=>ln(n,"td,th",t).bind(n=>ln(n,"table",t).bind(s=>((e,t)=>tn(e,e=>Ht(e).exists(e=>Je(e,t)),void 0).isSome())(r,s)?((e,t,o)=>((e,t,o)=>e.getSelection().bind(n=>((e,t,o,n)=>{const r=am(t)?((e,t,o)=>o.traverse(t).orThunk(()=>cm(t,o.gather,e)).map(o.relative))(e,t,n):((e,t,o,n)=>((e,t)=>Kt(e,t).filter(am).orThunk(()=>Kt(e,t-1).filter(am)))(t,o).bind(t=>n.traverse(t).fold(()=>cm(t,n.gather,e).map(n.relative),e=>(e=>Ht(e).bind(t=>{const o=Gt(t);return((e,t)=>L(e,b(Je,t)))(o,e).map(n=>((e,t,o,n)=>({parent:e,children:t,element:o,index:n}))(t,o,e,n))}))(e).map(e=>Dn.on(e.parent,e.index)))))(e,t,o,n);return r.map(e=>({start:e,finish:e}))})(t,n.finish,n.foffset,o).fold(()=>C.some(zl(n.finish,n.foffset)),r=>{const s=e.fromSitus(r);return l=lm.verify(e,n.finish,n.foffset,s.finish,s.foffset,o.failure,t),lm.cata(l,e=>C.none(),()=>C.none(),e=>C.some(zl(e,0)),e=>C.some(zl(e,wn(e))));var l})))(e,t,o).bind(n=>Cm(e,t,n.element,n.offset,o,20).map(e.fromSitus)))(e,t,o).bind(e=>ln(e.finish,"td,th",t).map(t=>({start:n,finish:t,range:e}))):C.none())),Om=(e,t,o,n,r,s)=>s(n,t).orThunk(()=>Dm(e,t,o,n,r).map(e=>{const t=e.range;return Ji(C.some(om(t.start,t.soffset,t.finish,t.foffset)),!0)})),km=(e,t)=>ln(e,"tr",t).bind(e=>ln(e,"table",t).bind(o=>{const n=bn(o,"tr");return Je(e,n[0])?((e,t,o)=>Il(Hl,e,e=>Cn(e).isSome(),o))(o,0,t).map(e=>{const t=wn(e);return Ji(C.some(om(e,t,e,t)),!0)}):C.none()})),Em=(e,t)=>ln(e,"tr",t).bind(e=>ln(e,"table",t).bind(o=>{const n=bn(o,"tr");return Je(e,n[n.length-1])?((e,t,o)=>Fl(Hl,e,e=>xn(e).isSome(),o))(o,0,t).map(e=>Ji(C.some(om(e,0,e,0)),!0)):C.none()})),Nm=(e,t,o,n,r,s,l)=>Dm(e,o,n,r,s).bind(e=>nm(t,o,e.start,e.finish,l)),Bm=(e,t)=>ln(e,"td,th",t),_m=e=>$t(e).exists(un),zm={traverse:Ut,gather:Vl,relative:Dn.before,retry:xm.tryDown,failure:lm.failedDown},Am={traverse:qt,gather:$l,relative:Dn.before,retry:xm.tryUp,failure:lm.failedUp},Wm=e=>t=>t===e,Lm=Wm(38),Mm=Wm(40),jm=e=>e>=37&&e<=40,Pm={isBackward:Wm(37),isForward:Wm(39)},Im={isBackward:Wm(39),isForward:Wm(37)},Fm=e=>({elementFromPoint:(t,o)=>Le.fromPoint(Le.fromDom(e.document),t,o),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,o,n,r)=>{const s=kn.exact(t,o,n,r);return((e,t)=>(e=>{const t=e.getClientRects(),o=t.length>0?t[0]:e.getBoundingClientRect();return o.width>0||o.height>0?C.some(o).map(He):C.none()})(Ue(e,t)))(e,s)},getSelection:()=>Pn(e).map(t=>tm(e,t)),fromSitus:t=>{const o=kn.relative(t.start,t.finish);return tm(e,o)},situsFromPoint:(t,o)=>((e,t,o)=>((e,t,o)=>((e,t,o)=>e.caretPositionFromPoint?((e,t,o)=>{var n;return C.from(null===(n=e.caretPositionFromPoint)||void 0===n?void 0:n.call(e,t,o)).bind(t=>{if(null===t.offsetNode)return C.none();const o=e.createRange();return o.setStart(t.offsetNode,t.offset),o.collapse(),C.some(o)})})(e,t,o):e.caretRangeFromPoint?((e,t,o)=>{var n;return C.from(null===(n=e.caretRangeFromPoint)||void 0===n?void 0:n.call(e,t,o))})(e,t,o):C.none())(e.document,t,o).map(e=>Tn(Le.fromDom(e.startContainer),e.startOffset,Le.fromDom(e.endContainer),e.endOffset)))(e,t,o))(e,t,o).map(e=>em(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{(e=>{Nn(e).each(e=>e.removeAllRanges())})(e)},collapseSelection:(t=!1)=>{Pn(e).each(o=>o.fold(e=>e.collapse(t),(o,n)=>{const r=t?o:n;Wn(e,r,r)},(o,n,r,s)=>{const l=t?o:r,a=t?n:s;An(e,l,a,l,a)}))},setSelection:t=>{An(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,o)=>{Wn(e,t,o)},selectNode:t=>{jn(e,t,!1)},selectContents:t=>{jn(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Vo(o,n)})(Le.fromDom(e.document)).top,scrollBy:(t,o)=>{((e,t,o)=>{const n=(void 0!==o?o.dom:document).defaultView;n&&n.scrollBy(e,t)})(t,o,Le.fromDom(e.document))}}),Hm=(e,t)=>({rows:e,cols:t}),$m=e=>on(e,At).exists(un),Vm=(e,t)=>$m(e)||$m(t),qm="data-mce-selected",Um="data-mce-first-selected",Gm="data-mce-last-selected",Km="["+qm+"]",Ym={selected:qm,selectedSelector:"td["+qm+"],th["+qm+"]",firstSelected:Um,firstSelectedSelector:"td["+Um+"],th["+Um+"]",lastSelected:Gm,lastSelectedSelector:"td["+Gm+"],th["+Gm+"]"},Jm=(e,t,o)=>({element:o,mergable:Yi(t,e,Ym),unmergable:Ki(e),selection:Gi(e)}),Qm=e=>(t,o)=>{const n=Nt(t),r="col"===n||"colgroup"===n?lr(s=t).bind(e=>Ui(e,Ym.firstSelectedSelector)).fold(g(s),e=>e[0]):t;var s;return ln(r,e,o)},Xm=Qm("th,td,caption"),Zm=Qm("th,td"),ed=e=>{return t=e.model.table.getSelectedCells(),E(t,Le.fromDom);var t},td=(e,t)=>e.dispatch("NewRow",{node:t}),od=(e,t)=>e.dispatch("NewCell",{node:t}),nd=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},rd={structure:!1,style:!0},sd={structure:!0,style:!1},ld={structure:!0,style:!0},ad=(e,t)=>Ti(e)?zs(t):Ri(e)?_s(t):Bs(t),cd=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},id=(e,t,o,n,s)=>{const l=(e=>{const t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:((e,t)=>Di(e)||!ki(e)?t:Ri(e)?{...t,width:bi(e)}:{...t,width:pi})(e,o)})(e),a={styles:l,attributes:Ni(e),colGroups:Bi(e)};return e.undoManager.ignore(()=>{const r=((e,t,o,n,r,s=Kc)=>{const l=Le.fromTag("table"),a="cells"!==r;Eo(l,s.styles),fo(l,s.attributes),s.colGroups&&lo(l,(e=>{const t=Le.fromTag("colgroup");return k(e,()=>lo(t,Le.fromTag("col"))),t})(t));const c=Math.min(e,o);if(a&&o>0){const e=Le.fromTag("thead");lo(l,e);const s=Yc(o,t,"sectionCells"===r?c:0,n);io(e,s)}const i=Le.fromTag("tbody");lo(l,i);const m=Yc(a?e-c:e,t,a?0:o,n);return io(i,m),l})(o,t,s,n,vi(e),a);uo(r,"data-mce-id","__mce");const l=(e=>{const t=Le.fromTag("div"),o=Le.fromDom(e.dom.cloneNode(!0));return lo(t,o),(e=>e.dom.innerHTML)(t)})(r);e.insertContent(l),e.addVisual()}),sn(_i(e),'table[data-mce-id="__mce"]').map(t=>(Ri(e)?ta(t):Di(e)?oa(t):(Ti(e)||(e=>r(e)&&-1!==e.indexOf("%"))(l.width))&&ea(t),Ai(t),po(t,"data-mce-id"),((e,t)=>{N(bn(t,"tr"),t=>{td(e,t.dom),N(bn(t,"th,td"),t=>{od(e,t.dom)})})})(e,t),((e,t)=>{sn(t,"td,th").each(b(cd,e))})(e,t),t.dom)).getOrNull()};var md=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const dd="x-tinymce/dom-table-",ud=dd+"rows",fd=dd+"columns",gd=e=>{const t=md.FakeClipboardItem(e);md.write([t])},hd=e=>{var t;const o=null!==(t=md.read())&&void 0!==t?t:[];return V(o,t=>C.from(t.getType(e)))},pd=e=>{hd(e).isSome()&&md.clear()},bd=e=>{e.fold(vd,e=>gd({[ud]:e}))},wd=()=>hd(ud),vd=()=>pd(ud),yd=e=>{e.fold(Cd,e=>gd({[fd]:e}))},xd=()=>hd(fd),Cd=()=>pd(fd),Sd=e=>Xm(Wi(e),zi(e)).filter(Fi),Td=e=>!mn(Le.fromDom(e.target),"ephox-snooker-resizer-bar"),Rd=e=>m(e)&&"TABLE"===e.nodeName,Dd="bar-",Od=e=>"false"!==go(e,"data-mce-resize"),kd=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=D(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=D(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);const t=(e=>{const t=fe(),o=fe(),n=fe();let r,s,l,a;const c=t=>ad(e,t),i=()=>xi(e)?Kn():Gn(),m=(t,o,n,m)=>{const d=(e=>{return pe(t=e,"corner-")?(e=>e.substring(7))(t):t;var t})(o),u=be(d,"e"),f=pe(d,"n");if(""===s&&ea(t),""===a&&(e=>{const t=(e=>Mo(e)+"px")(e);yl(e,C.none(),C.some(t)),Zl(e)})(t),n!==r&&""!==s){ko(t,"width",s);const o=i(),l=c(t),a=xi(e)||u?(e=>ua(e).columns)(t)-1:0;Xs(t,n-r,a,o,l)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(s)){const e=parseFloat(s.replace("%",""));ko(t,"width",n*e/r+"%")}if((e=>/^(\d+(\.\d+)?)px$/.test(e))(s)&&(e=>{const t=Sr(e);Nr(t)||N(rr(e),e=>{const t=No(e,"width");ko(e,"width",t),po(e,"width")})})(t),m!==l&&""!==a){ko(t,"height",a);const e=f?0:(e=>ua(e).rows)(t)-1;Zs(t,m-l,e)}};e.on("init",()=>{const r=((e,t)=>((e,t)=>({parent:g(e),view:g(e),dragContainer:g(e),origin:()=>Uo(e),isResizable:t}))(Le.fromDom(e.getBody()),t))(e,Od);if(n.set(r),(e=>{const t=e.options.get("object_resizing");return D(t.split(","),"table")})(e)&&Oi(e)){const n=((e,t,o)=>{const n=es,r=os,s=gi(e),l=Qc({beforeResize:Jc(["table","type"]),afterResize:Jc(["table","type"]),startDrag:Jc([])});return s.events.adjustHeight.bind(e=>{const t=e.table;l.trigger.beforeResize(t,"row");const o=n.delta(e.delta,t);Zs(t,o,e.row),l.trigger.afterResize(t,"row")}),s.events.startAdjust.bind(e=>{l.trigger.startDrag()}),s.events.adjustWidth.bind(e=>{const n=e.table;l.trigger.beforeResize(n,"col");const s=r.delta(e.delta,n),a=o(n);Xs(n,s,e.column,t,a),l.trigger.afterResize(n,"col")}),{on:s.on,off:s.off,refreshBars:s.refresh,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:l.registry}})(r,i(),c);e.mode.isReadOnly()||n.on(),n.events.startDrag.bind(o=>{t.set(e.selection.getRng())}),n.events.beforeResize.bind(t=>{const o=t.table.dom;((e,t,o,n,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:n,origin:r})})(e,o,Li(o),Mi(o),Dd+t.type)}),n.events.afterResize.bind(o=>{const n=o.table,r=n.dom;Ai(n),t.on(t=>{e.selection.setRng(t),e.focus()}),((e,t,o,n,r)=>{e.dispatch("ObjectResized",{target:t,width:o,height:n,origin:r})})(e,r,Li(r),Mi(r),Dd+o.type),e.undoManager.add()}),o.set(n)}}),e.on("ObjectResizeStart",t=>{const o=t.target;if(Rd(o)&&!e.mode.isReadOnly()){const n=Le.fromDom(o);N(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+yi(e)+"-columns")}),!Cl(n)&&Ri(e)?ta(n):!xl(n)&&Ti(e)&&ea(n),Sl(n)&&pe(t.origin,Dd)&&ea(n),r=t.width,s=Di(e)?"":Pi(e,o).getOr(""),l=t.height,a=Ii(e,o).getOr("")}}),e.on("ObjectResized",t=>{const o=t.target;if(Rd(o)){const n=Le.fromDom(o),r=t.origin;(e=>pe(e,"corner-"))(r)&&m(n,r,t.width,t.height),Ai(n),nd(e,n.dom,rd)}});const d=()=>{o.on(e=>{e.on(),e.showBars()})},u=()=>{o.on(e=>{e.off(),e.hideBars()})};return e.on("DisabledStateChange",e=>{e.state?u():d()}),e.on("SwitchMode",()=>{e.mode.isReadOnly()?u():d()}),e.on("dragstart dragend",e=>{"dragstart"===e.type?u():d()}),e.on("remove",()=>{o.on(e=>{e.destroy()})}),{refresh:e=>{o.on(t=>t.refreshBars(Le.fromDom(e)))},hide:()=>{o.on(e=>e.hideBars())},show:()=>{o.on(e=>e.showBars())}}})(e),o=((e,t)=>{const o=(r=Ym.selectedSelector,{get:()=>Ui(Le.fromDom(e.getBody()),r).fold(()=>Zm(Wi(e),zi(e)).fold(Qi,Zi),Xi)}),n=((e,t,o)=>{const n=t=>{po(t,e.selected),po(t,e.firstSelected),po(t,e.lastSelected)},r=t=>{uo(t,e.selected,"1")},s=e=>{l(e),o()},l=t=>{const o=bn(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);N(o,n)};return{clearBeforeUpdate:l,clear:s,selectRange:(o,n,l,a)=>{s(o),N(n,r),uo(l,e.firstSelected,"1"),uo(a,e.lastSelected,"1"),t(n,l,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}})(Ym,(t,o,n)=>{lr(o).each(r=>{const s=E(t,e=>e.dom),l=wi(e),a=ma(f,Le.fromDom(e.getDoc()),l),c=((e,t,o)=>{const n=Sr(e);return qs(n,t).map(e=>{const t=js(n,o,!1),{rows:r}=ze(t),s=((e,t)=>{const o=e.slice(0,t[t.length-1].row+1),n=Ps(o);return j(n,e=>{const o=e.cells.slice(0,t[t.length-1].column+1);return E(o,e=>e.element)})})(r,e),l=((e,t)=>{const o=e.slice(t[0].row+t[0].rowspan-1,e.length),n=Ps(o);return j(n,e=>{const o=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return E(o,e=>e.element)})})(r,e);return{upOrLeftCells:s,downOrRightCells:l}})})(r,{selection:ed(e)},a).map(e=>K(e,e=>E(e,e=>e.dom))).getOrUndefined();((e,t,o,n,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:o,finish:n,otherCells:r})})(e,s,o.dom,n.dom,c)})},()=>(e=>{e.dispatch("TableSelectionClear")})(e));var r;return e.on("init",o=>{const r=e.getWin(),s=_i(e),l=zi(e),a=((e,t,o,n)=>{const r=((e,t,o,n)=>{const r=fe(),s=r.clear,l=s=>{r.on(r=>{n.clearBeforeUpdate(t),Bm(s.target,o).each(l=>{$i(r,l,o).each(o=>{const r=o.boxes.getOr([]);if(1===r.length){const e=r[0],o="false"===fn(e),l=ie(dn(s.target),e,Je);o&&l&&n.selectRange(t,r,e,e)}else r.length>1&&(n.selectRange(t,r,o.start,o.finish),e.selectContents(l))})})})};return{clearstate:s,mousedown:e=>{n.clear(t),Bm(e.target,o).filter(_m).each(r.set)},mouseover:e=>{l(e)},mouseup:e=>{l(e),s()}}})(Fm(e),t,o,n);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}})(r,s,l,n),c=((e,t,o,n)=>{const r=Fm(e),s=()=>(n.clear(t),C.none());return{keydown:(e,l,a,c,i,m)=>{const d=e.raw,u=d.which,f=!0===d.shiftKey,g=Vi(t,n.selectedSelector).fold(()=>(jm(u)&&!f&&n.clearBeforeUpdate(t),jm(u)&&f&&!Vm(l,c)?C.none:Mm(u)&&f?b(Nm,r,t,o,zm,c,l,n.selectRange):Lm(u)&&f?b(Nm,r,t,o,Am,c,l,n.selectRange):Mm(u)?b(Om,r,o,zm,c,l,Em):Lm(u)?b(Om,r,o,Am,c,l,km):C.none),e=>{const o=o=>()=>{const s=V(o,o=>((e,t,o,n,r)=>((e,t,o,n,r)=>((e,t)=>W(e,e=>Ge(e,t)))(e,r).bind(e=>((e,t,o)=>lr(e).bind(n=>((e,t,o,n)=>Dr(e,t,Je).bind(t=>{const r=o>0?t.row+t.rowspan-1:t.row,s=n>0?t.column+t.colspan-1:t.column;return Rr(e,r+o,s+n).map(e=>e.element)}))(Gc(n),e,t,o)))(e,t,o).bind(e=>((e,t)=>nn(e,"table").bind(o=>sn(o,t).bind(t=>$i(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))))(e,n))))(n,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>(r.clearBeforeUpdate(o),r.selectRange(o,e.boxes,e.start,e.finish),e.boxes)))(o.rows,o.cols,t,e,n));return s.fold(()=>qi(t,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>{const o=Mm(u)||m.isForward(u)?Dn.after:Dn.before;return r.setRelativeSelection(Dn.on(e.first,0),o(e.table)),n.clear(t),Ji(C.none(),!0)}),e=>C.some(Ji(C.none(),!0)))};return jm(u)&&f&&!Vm(l,c)?C.none:Mm(u)&&f?o([Hm(1,0)]):Lm(u)&&f?o([Hm(-1,0)]):m.isBackward(u)&&f?o([Hm(0,-1),Hm(-1,0)]):m.isForward(u)&&f?o([Hm(0,1),Hm(1,0)]):jm(u)&&!f?s:C.none});return g()},keyup:(e,r,s,l,a)=>Vi(t,n.selectedSelector).fold(()=>{const c=e.raw,i=c.which;return!0===c.shiftKey&&jm(i)&&Vm(r,l)?((e,t,o,n,r,s,l)=>Je(o,r)&&n===s?C.none():ln(o,"td,th",t).bind(o=>ln(r,"td,th",t).bind(n=>nm(e,t,o,n,l))))(t,o,r,s,l,a,n.selectRange):C.none()},C.none)}})(r,s,l,n),i=((e,t,o,n)=>{const r=Fm(e);return(e,s)=>{n.clearBeforeUpdate(t),$i(e,s,o).each(e=>{const o=e.boxes.getOr([]);n.selectRange(t,o,e.start,e.finish),r.selectContents(s),r.collapseSelection()})}})(r,s,l,n);e.on("TableSelectorChange",e=>i(e.start,e.finish));const m=(t,o)=>{(e=>!0===e.raw.shiftKey)(t)&&(o.kill&&t.kill(),o.selection.each(t=>{const o=kn.relative(t.start,t.finish),n=Ue(r,o);e.selection.setRng(n)}))},d=e=>0===e.button,u=(()=>{const e=ee(Le.fromDom(s)),t=ee(0);return{touchEnd:o=>{const n=Le.fromDom(o.target);if(Pt("td")(n)||Pt("th")(n)){const r=e.get(),s=t.get();Je(r,n)&&o.timeStamp-s<300&&(o.preventDefault(),i(n,n))}e.set(n),t.set(o.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{d(e)&&Td(e)&&a.mousedown(oo(e))}),e.on("mouseover",e=>{var t;(void 0===(t=e).buttons||1&t.buttons)&&Td(e)&&a.mouseover(oo(e))}),e.on("mouseup",e=>{d(e)&&Td(e)&&a.mouseup(oo(e))}),e.on("touchend",u.touchEnd),e.on("keyup",t=>{const o=oo(t);if(o.raw.shiftKey&&jm(o.raw.which)){const t=e.selection.getRng(),n=Le.fromDom(t.startContainer),r=Le.fromDom(t.endContainer);c.keyup(o,n,t.startOffset,r,t.endOffset).each(e=>{m(o,e)})}}),e.on("keydown",o=>{const n=oo(o);t.hide();const r=e.selection.getRng(),s=Le.fromDom(r.startContainer),l=Le.fromDom(r.endContainer),a=Xo(Pm,Im)(Le.fromDom(e.selection.getStart()));c.keydown(n,s,r.startOffset,l,r.endOffset,a).each(e=>{m(n,e)}),t.show()}),e.on("NodeChange",()=>{const t=e.selection,o=Le.fromDom(t.getStart()),r=Le.fromDom(t.getEnd());Yl(lr,[o,r]).fold(()=>n.clear(s),f)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(Ym.firstSelected),e.serializer.addTempAttr(Ym.lastSelected)}),{getSelectedCells:()=>((e,t)=>{switch(e.tag){case"none":return t();case"single":return(e=>[e.dom])(e.element);case"multiple":return(e=>E(e,e=>e.dom))(e.elements)}})(o.get(),g([])),clearSelectedCells:e=>n.clear(Le.fromDom(e))}})(e,t),n=((e,t,o)=>{const n=e=>"table"===Nt(_i(e)),r=wi(e),s=Ci(e)?f:el,l=t=>{switch(vi(e)){case"section":return Mr();case"sectionCells":return jr();case"cells":return Pr();default:return(e=>{var t;switch((t=Sr(e),V(t.all,e=>{const t=ur(e);return"header"===t.type?C.from(t.subType):C.none()})).getOr("section")){case"section":return Ar();case"sectionCells":return Wr();case"cells":return Lr()}})(t)}},a=(n,s,a,c)=>(i,m,d=!1)=>{Ai(i);const u=Le.fromDom(e.getDoc()),f=ma(a,u,r),g={sizing:ad(e,i),resize:Ci(e)?Gn():Kn(),section:l(i)};return s(i)?n(i,m,f,g).bind(n=>{t.refresh(i.dom),N(n.newRows,t=>{td(e,t.dom)}),N(n.newCells,t=>{od(e,t.dom)});const r=((t,n)=>n.cursor.fold(()=>{const n=rr(t);return H(n).filter(Do).map(n=>{o.clearSelectedCells(t.dom);const r=e.dom.createRng();return r.selectNode(n.dom),e.selection.setRng(r),uo(n,"data-mce-selected","1"),r})},n=>{const r=Ml(jl,n),s=e.dom.createRng();return s.setStart(r.element.dom,r.offset),s.setEnd(r.element.dom,r.offset),e.selection.setRng(s),o.clearSelectedCells(t.dom),C.some(s)}))(i,n);return Do(i)&&(Ai(i),d||nd(e,i.dom,c)),r.map(e=>({rng:e,effect:c}))}):C.none()},c=a(Cc,t=>!n(e)||ua(t).rows>1,f,sd),i=a(xc,t=>!n(e)||ua(t).columns>1,f,sd);return{deleteRow:c,deleteColumn:i,insertRowsBefore:a(bc,x,f,sd),insertRowsAfter:a(wc,x,f,sd),insertColumnsBefore:a(vc,x,s,sd),insertColumnsAfter:a(yc,x,s,sd),mergeCells:a(Nc,x,f,sd),unmergeCells:a(Bc,x,f,sd),pasteColsBefore:a(zc,x,f,sd),pasteColsAfter:a(Ac,x,f,sd),pasteRowsBefore:a(Wc,x,f,sd),pasteRowsAfter:a(Lc,x,f,sd),pasteCells:a(_c,x,f,ld),makeCellsHeader:a(kc,x,f,sd),unmakeCellsHeader:a(Ec,x,f,sd),makeColumnsHeader:a(Sc,x,f,sd),unmakeColumnsHeader:a(Tc,x,f,sd),makeRowsHeader:a(Rc,x,f,sd),makeRowsBody:a(Dc,x,f,sd),makeRowsFooter:a(Oc,x,f,sd),getTableRowType:Pc,getTableCellType:jc,getTableColType:Mc}})(e,t,o);return((e,t)=>{const o=zi(e),n=e=>lr(e,o),l=t=>(e=>Zm(Wi(e),zi(e)).filter(Fi))(e).bind(e=>n(e).map(o=>t(o,e))),a=t=>{e.focus()},c=(t,o=!1)=>l((n,r)=>{const s=Jm(ed(e),n,r);t(n,s,o).each(a)}),i=()=>l((t,o)=>((e,t,o)=>{const n=Sr(e);return qs(n,t).bind(e=>{const t=js(n,o,!1),r=ze(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),s=j(r,e=>{const t=_(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}),l=Ps(s);return de(l.length>0,l)}).map(e=>E(e,e=>{const t=Co(e.element);return N(e.cells,e=>{const o=So(e.element);As(o,"colspan",e.colspan,1),As(o,"rowspan",e.rowspan,1),lo(t,o)}),t}))})(t,Jm(ed(e),t,o),ma(f,Le.fromDom(e.getDoc()),C.none()))),m=()=>l((t,o)=>((e,t)=>{const o=Sr(e);return Us(o,t).map(e=>{const t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,s=((e,t,o)=>{if(Nr(e)){const n=_(Er(e),ol(t,o)),r=E(n,e=>{const n=So(e.element);return tl(n,"span",o-t),n}),s=Le.fromTag("colgroup");return io(s,r),[s]}return[]})(o,n,r),l=((e,t,o)=>E(e.all,e=>{const n=_(e.cells,ol(t,o)),r=E(n,e=>{const n=So(e.element);return tl(n,"colspan",o-t),n}),s=Le.fromTag("tr");return io(s,r),s}))(o,n,r);return[...s,...l]})})(t,Jm(ed(e),t,o))),d=(t,o)=>o().each(o=>{const n=E(o,e=>So(e));l((o,r)=>{const s=da(Le.fromDom(e.getDoc())),l=((e,t,o,n)=>({selection:Gi(e),clipboard:o,generators:n}))(ed(e),0,n,s);t(o,l).each(a)})}),g=e=>(t,o)=>((e,t)=>X(e,t)?C.from(e[t]):C.none())(o,"type").each(t=>{c(e(t),o.no_events)});G({mceTableSplitCells:()=>c(t.unmergeCells),mceTableMergeCells:()=>c(t.mergeCells),mceTableInsertRowBefore:()=>c(t.insertRowsBefore),mceTableInsertRowAfter:()=>c(t.insertRowsAfter),mceTableInsertColBefore:()=>c(t.insertColumnsBefore),mceTableInsertColAfter:()=>c(t.insertColumnsAfter),mceTableDeleteCol:()=>c(t.deleteColumn),mceTableDeleteRow:()=>c(t.deleteRow),mceTableCutCol:()=>m().each(e=>{yd(e),c(t.deleteColumn)}),mceTableCutRow:()=>i().each(e=>{bd(e),c(t.deleteRow)}),mceTableCopyCol:()=>m().each(e=>yd(e)),mceTableCopyRow:()=>i().each(e=>bd(e)),mceTablePasteColBefore:()=>d(t.pasteColsBefore,xd),mceTablePasteColAfter:()=>d(t.pasteColsAfter,xd),mceTablePasteRowBefore:()=>d(t.pasteRowsBefore,wd),mceTablePasteRowAfter:()=>d(t.pasteRowsAfter,wd),mceTableDelete:()=>Sd(e).each(t=>{lr(t,o).filter(w(o)).each(t=>{const o=Le.fromText("");if(ro(t,o),vo(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(o.dom,0),t.setEnd(o.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,o)=>{l(t=>{const n=ed(e),r=P(n,t=>e.formatter.match("tablecellclass",{value:o},t.dom)),s=r?e.formatter.remove:e.formatter.apply;N(n,e=>s("tablecellclass",{value:o},e.dom)),nd(e,t.dom,rd)})},mceTableToggleClass:(t,o)=>{l(t=>{e.formatter.toggle("tableclass",{value:o},t.dom),nd(e,t.dom,rd)})},mceTableToggleCaption:()=>{Sd(e).each(t=>{lr(t,o).each(o=>{rn(o,"caption").fold(()=>{const t=Le.fromTag("caption");lo(t,Le.fromText("Caption")),((e,t)=>{Kt(e,0).fold(()=>{lo(e,t)},e=>{no(e,t)})})(o,t),e.selection.setCursorLocation(t.dom,0)},n=>{Pt("caption")(t)&&Ye("td",o).each(t=>e.selection.setCursorLocation(t.dom,0)),vo(n)}),nd(e,o.dom,sd)})})},mceTableSizingMode:(t,n)=>(t=>Sd(e).each(n=>{Di(e)||Ri(e)||Ti(e)||lr(n,o).each(o=>{"relative"!==t||xl(o)?"fixed"!==t||Cl(o)?"responsive"!==t||Sl(o)||oa(o):ta(o):ea(o),Ai(o),nd(e,o.dom,sd)})}))(n),mceTableCellType:g(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:g(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:g(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,o)=>e.addCommand(o,t)),e.addCommand("mceInsertTable",(t,o)=>{((e,t,o,n={})=>{const r=e=>u(e)&&e>0;if(r(t)&&r(o)){const r=n.headerRows||0,s=n.headerColumns||0;return id(e,o,t,s,r)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,o.rows,o.columns,o.options)}),e.addCommand("mceTableApplyCellStyle",(t,o)=>{const l=e=>"tablecell"+e.toLowerCase().replace("-","");if(!s(o))return;const a=_(ed(e),Fi);if(0===a.length)return;const c=((e,t)=>{const o={};return((e,t,o,n)=>{G(e,(e,r)=>{(t(e,r)?o:n)(e,r)})})(e,t,(e=>(t,o)=>{e[o]=t})(o),f),o})(o,(t,o)=>e.formatter.has(l(o))&&r(t));(e=>{for(const t in e)if(U.call(e,t))return!1;return!0})(c)||(G(c,(t,o)=>{const n=l(o);N(a,o=>{""===t?e.formatter.remove(n,{value:null},o.dom,!0):e.formatter.apply(n,{value:t},o.dom)})}),n(a[0]).each(t=>nd(e,t.dom,rd)))})})(e,n),((e,t)=>{const o=zi(e),n=t=>Zm(Wi(e)).bind(n=>lr(n,o).map(o=>{const r=Jm(ed(e),o,n);return t(o,r)})).getOr("");G({mceTableRowType:()=>n(t.getTableRowType),mceTableCellType:()=>n(t.getTableCellType),mceTableColType:()=>n(t.getTableColType)},(t,o)=>e.addQueryValueHandler(o,t))})(e,n),((e,t)=>{e.on("BeforeGetContent",t=>{const o=o=>{t.preventDefault(),(e=>lr(e[0]).map(e=>{const t=((e,t)=>{const o=e=>Ge(e.element,t),n=So(e),r=pr(n),s=Bs(e),l=Tr(r),a=((e,t)=>{const o=e.grid.columns;let n=e.grid.rows,r=o,s=0,l=0;const a=[],c=[];return G(e.access,e=>{if(a.push(e),t(e)){c.push(e);const t=e.row,o=t+e.rowspan-1,a=e.column,i=a+e.colspan-1;t<n?n=t:o>s&&(s=o),a<r?r=a:i>l&&(l=i)}}),((e,t,o,n,r,s)=>({minRow:e,minCol:t,maxRow:o,maxCol:n,allCells:r,selectedCells:s}))(n,r,s,l,a,c)})(l,o),c="th:not("+t+"),td:not("+t+")",i=or(n,"th,td",e=>Ge(e,c));N(i,vo),((e,t,o,n)=>{const r=_(e,e=>"colgroup"!==e.section),s=t.grid.columns,l=t.grid.rows;for(let e=0;e<l;e++){let l=!1;for(let a=0;a<s;a++)e<o.minRow||e>o.maxRow||a<o.minCol||a>o.maxCol||(Rr(t,e,a).filter(n).isNone()?nl(r,l,e):l=!0)}})(r,l,a,o);const m=((e,t,o,n)=>{if(0===n.minCol&&t.grid.columns===n.maxCol+1)return 0;const r=Ds(t,e,o),s=A(r,(e,t)=>e+t,0),l=A(r.slice(n.minCol,n.maxCol+1),(e,t)=>e+t,0),a=l/s*o.pixelWidth()-o.pixelWidth();return o.getCellDelta(a)})(e,Sr(e),s,a);return((e,t,o,n)=>{G(o.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&vo(e.element)});const r=_(tr(e,"tr"),e=>0===e.dom.childElementCount);N(r,vo),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||N(tr(e,"th,td"),e=>{po(e,"rowspan"),po(e,"colspan")}),po(e,br),po(e,"data-snooker-col-series"),Bs(e).adjustTableWidth(n)})(n,a,l,m),n})(e,Km);return Ai(t),[t]}))(o).each(o=>{const n="text"===t.format?((e,t)=>{const o=e.getDoc(),n=Jt(Le.fromDom(e.getBody())),r=Le.fromTag("div",o);uo(r,"data-mce-bogus","all"),Eo(r,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const s=(e=>Yt(e)?e:Le.fromDom(Ft(e).dom.body))(n);io(r,t),lo(s,r);const l=r.dom.innerText;return vo(r),l})(e,o):((e,t)=>E(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""))(e,o);t.content=n})};if(!0===t.selection){const t=(e=>_(ed(e),e=>Ge(e,Ym.selectedSelector)))(e);t.length>=1&&o(t)}}),e.on("BeforeSetContent",o=>{if(!0===o.selection&&!0===o.paste){const n=ed(e);H(n).each(n=>{lr(n).each(r=>{const s=_((e=>{const t=document.createElement("div");return t.innerHTML=e,Gt(Le.fromDom(t))})(o.content),e=>"meta"!==Nt(e)),l=Pt("table");if(Ei(e)&&1===s.length&&l(s[0])){o.preventDefault();const l=Le.fromDom(e.getDoc()),a=da(l),c=((e,t,o)=>({element:e,clipboard:t,generators:o}))(n,s[0],a);t.pasteCells(r,c).each(()=>{e.focus()})}})})}})})(e,n),{getSelectedCells:o.getSelectedCells,clearSelectedCells:o.clearSelectedCells}};e.add("dom",e=>({table:kd(e)}))}();